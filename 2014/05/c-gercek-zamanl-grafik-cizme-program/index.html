<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><style>pre,code{font-family:fira code,courier new,monospace;font-size:.95rem}</style><link id=theme-style rel=stylesheet href=https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.classless.min.css><title>[TR] C# Gerçek Zamanlı Grafik Çizme Programı | mozanunal.com</title><link rel=icon href=/favicon.svg type=image/svg+xml><link rel="shortcut icon" href=/favicon.ico><link rel=apple-touch-icon href=/apple-touch-icon.png></head><body><header><div class=theme-selector><select id=theme-selector-input><option value=https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.classless.min.css>Pico</option><option value=https://cdn.jsdelivr.net/gh/digitallytailored/classless@latest/classless.min.css>Classless.css</option><option value=https://cdn.jsdelivr.net/gh/cspablocortez/cosmocss@latest/cosmo.min.css>Cosmo.css</option><option value=https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.fluid.classless.min.css>Pico-Fluid</option><option value=https://cdn.jsdelivr.net/npm/water.css@2/out/water.css>Water.css</option><option value=https://cdn.jsdelivr.net/npm/sakura.css/css/sakura.css>Sakura.css</option><option value=https://cdn.simplecss.org/simple.min.css>Simple.css</option><option value=https://cdn.jsdelivr.net/gh/alvaromontoro/almond.css@latest/dist/almond.min.css>Almond.css</option><option value=https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css>New.css</option><option value=https://unpkg.com/missing.css>Missing.css</option><option value=https://unpkg.com/boltcss/bolt.min.css>Bolt.css</option><option value=https://perfectmotherfuckingwebsite.com/fuckingstyle.css>PerfectMFWS</option><option value>HTML only</option></select></div><script>(function(){"use strict";const o=document.getElementById("theme-style"),e=document.getElementById("theme-selector-input"),n="hugo-classless-theme";function s(t){o.href=t,e&&(e.value=t)}const t=localStorage.getItem(n);if(t){const n=Array.from(e.options).some(e=>e.value===t);n&&s(t)}e&&e.addEventListener("change",()=>{const t=e.value;s(t),localStorage.setItem(n,t)})})()</script><div><h3>mozanunal.com</h3><h4><a href=/>Home</a> | <a href=/posts/>Posts</a> | <a href=/projects/>Projects</a> | <a href=/papers/>Papers</a> | <a href=/contact/>Contact</a></h4></div></header><main><article><header><h1>[TR] C# Gerçek Zamanlı Grafik Çizme Programı</h1><p><em><time datetime=2014-05-27>May 27, 2014</time></em></p></header><div><p><strong>Herkese Merhabalar!</strong><br><a href=https://github.com/mozanunal/serialPortGrapher>Programın kaynak koduna buradan ulaşabilirsiniz.</a><br>İkinci yazımda C# ile gerçek zamanlı grafik çizdirme uygulamasından
bahsedeceğim. Bu uygulamada C# programlama dili ve Microsoft Visual Studio 2010
kullanılmıştır. C# ile grafik çizmemize olanak sağlayan zed graph
kütüphanesinden
yararlanılmıştır.<a href=https://zedgraph.sourceforge.net/index.html>Bu kütüphaneyi buradan indirebilirsiniz</a>.
Sistemin genel algoritmasına bakarsak şöyle çalışır; seri porttan veri okunur,
veri aralardaki virgüllere göre parse edilip labellera aktarılır, Eklenen
&ldquo;Timer&rdquo; öğesi ile timerın her periyodunda zaman belirten labela geçen zaman
kadar eklenir böylece kaçıncı saniye olduğu tutulur, aynı zamanda timerın her
bir periyodunda x değerleri zaman, y değerleri data noktaları olmak üzere
grafiğe bir nokta eklenir. Şimdi çalışma şeklini daha ayrıntılı bir şekilde
inceleyelim.</p><p>Mikrodenetleyici-bilgisayar iletişimi projelerinde olmazsa olmazlardan biri Seri
porttan veri okumaktır. Bu sayede mikrodenetleyici ile iletişim kurabiliriz ve
veri alışverişinde bulunabiliriz. Aynı zamanda bilgisayar kontrollü robotikte de
komut vermek için  kullanılır. C# üzerinden serial port programı yazma işlemi
oldukça kolaylaştırılmıştır. Seri port öğesi eklenir ve ayarları yapılır.
Buradaki ayarlar veri transfer hızı hangi Com Portun okunacağının ayarı v.b.
&ldquo;Save to text&rdquo; özelliği de gelen veriyi saklayıp sonra tekrar inceleme imkanı
sunar.Asıl konumuz bu olmadığı için çok ayrıntıya girmiyorum zaten kolayca
örnekleri bulunabilir.</p><p><img src=https://3.bp.blogspot.com/-OpTteyKRPkw/U4JijZMfddI/AAAAAAAAACo/Rw1kmXUUXNY/s720/Ekran+Al%C4%B1nt%C4%B1s%C4%B1.PNG alt></p><p>İkinci kısım seri porttan alınan verinin uygun şekilde parçalandığı ve labellara
aktarıldığı bölümdür. Bunun için &ldquo;Display Text&rdquo; isimli bir fonksiyon
yazılmıştır. Bu fonksiyon ile gelen verinin her satırının şekli</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>$,data1,data2,data3
</span></span></code></pre></div><p>olarak belirlenmiştir. Fonksiyonun algoritması şu şekildedir; gelen verinin ilk
harfi &ldquo;$&rdquo; değilse veriyi işlemez, eğer ilk harfi oysa virgül sayısına
bakar(Stringin içinden belli bir karakteri arama fonksiyonu kullanılmıştır.),
eğer o da 3&rsquo;e eşit ise gelen veriyi virgüllere göre parçalar ve ilk kısım
hariç("$") kalan veriyi, tek tek 3 ayrı labela aktarır böylece gelen data1,
data2, data3 ayrı labellara aktarılmış olur.<br><img src=https://3.bp.blogspot.com/-igLoVYnnakU/U4JtR9fQCeI/AAAAAAAAADU/xnl9DY_IYns/s720/4.PNG alt></p><p>Grafik çizdirme kısmına geçmeden önce grafiği çizen timerı açan ve kapatan 2
butondan bahsedeyim. Bunlar sayesinde grafik çizdirme başlatılır ve durdurulur.
Yani butonların tıklama &ldquo;event"lerinde sadece <code>timer1.enable=true;</code> ve
<code>timer1.enable=false</code> kodu vardır.(Tabi ayrı ayrı birinde true olan diğerinde
false olan )</p><p><img src=https://2.bp.blogspot.com/-g9su7CqID_0/U4JtS_cz0fI/AAAAAAAAADI/nbJVSsGaQP8/s720/Ekran+Al%C4%B1nt%C4%B1s%C4%B1565.PNG alt>
Resimde altta eklediğimiz SeriPort ve timer1 öğesini görebilirsiniz.
&ldquo;FileDiaglog&rdquo; öğeleri ise text dosyasına kaydetmek için ve bir text dostasını
seri porttan yollamak için kullanılır.</p><p>ilk önce grafiğin ayarlarından başlayalım. Grafiğe bir çizim alanı yanı &ldquo;pane&rdquo;
ekleyelim. Çizdiğimiz her şeyi hangi &ldquo;pane"e çizdiğimizi belirtmek zorundayız.
Eksenlere isim koymamız ve daha bir sürü ayar yapmamız mümkün ama ben karışıklık
yaratmamak adına sade bir grafik tercih ettim. ZedGraph kütüphanesi
yapabileceğiniz diğer ayarlar ile çok farklı grafikler çizdirme imkanı sunar.
Grafiğin altını doldurma, nokta grafiği, sütun ve daire grafiği gibi çeşit ve
renk opsiyonları mevcuttur. Bu çeşitlerin bazılarına
<a href=https://zedgraph.sourceforge.net/samples.html>buradan</a> ulaşabilirsiniz.</p><p><img src=https://2.bp.blogspot.com/-BnQhYNdpYpY/U4PawOllbuI/AAAAAAAAADo/1qVUP9OzlL0/s720/Ekran+Al%C4%B1nt%C4%B1s%C4%B1.PNG alt></p><p>Grafik ayarlarında önemli bir yerlerden biri de &ldquo;Point pair list"in ve &ldquo;Line
item"ın belirlenmesidir. Çizilecek her eğri için birer tane bunlardan
belirlenmelidir. &ldquo;RolingPointPairList&rdquo; seçilmesinin sebebi ise &ldquo;rolling&rdquo;
olduğunda en fazla seçilen kadar(burada en fazla 40 nokta çifti) noktanın
hafızada saklaması böylece bir süre sonra biriken noktaların bilgisayarda
yavaşlama meydana getirmesinin engellenmesidir. Belli aralıklarla zaten grafik
üstüne sağ tıklanarak resim olarak kaydetme opsiyonu da mevcuttur.</p><p><img src=https://1.bp.blogspot.com/-hAOgV5UrDXo/U4JtR8Rk6eI/AAAAAAAAAC4/A-FNsqx61S0/s720/3.PNG alt></p><p>Gelelim grafiği çizdirme kısmına. İlk önce grafiğe bir &ldquo;Timer&rdquo; öğesi eklenir ve
periyodu 1000 ms(1 saniye) olarak belirlenir. Bu tamamen opsiyoneldir ne
kadarlık zaman aralıklarında grafiğimize nokta eklenmesi istendiğine
bağlıdır.İlk 3 satırdaki kodlar ile bir labelda şu anki saniyenin tutulması
sağlanır(Zaman bizim x koordinatımız olduğu için anlık olarak kulanılması
gereklidir). Sonraki kısımlar ise grafiğe nokta eklenmesi algoritmasıdır. Gelen
verileri yukarıda parçalayıp labellara aktarmıştık burda ise o labellar ve zaman
labelı kullanılarak nokta çifleri elde edilir. Nokta çiftleri, nokta listelerine
aktarılır sonra bunlar birleştirilerek eğri çizilir.
<code>myCurveOne = myPane.AddCurve(null, listPointsOne, Color.Blue, SymbolType.Circle)</code>
bu satır ile eğrinin hangi &ldquo;pane"e çizileceği, rengi, noktaların gösteren sembol
(yuvarlak,yıldız,kare), eğrinin altının dolu-boş olacağı belirlenir.  En alt
kısımda grafik yenilerek yeni eğrinin çizilmesi graifğin gördüğümüz yerinin
eğrimize paralel olarak uygun şekilde yer değiştirmesi sağlanır. Böylece
Bilgisayara hiç değmeden grafiğin takibi otomatik olarak yapılmış olur.</p><p><img src=https://3.bp.blogspot.com/-9A-D0jYFs-A/U4JtRxN2SNI/AAAAAAAAAC8/0UROIHsdApY/s720/5.PNG alt></p><p>Aşağıda programımızın son hali bulunmaktadır. En kısa zamanda videosunu eklemeye
çalışacağım. Görselleme, telemetri projelerinde ve bilgisayarla kontrol
projelerinde en önemli noktalardan biridir(ya da pid, sensor test ederken).
Programımız da bu ihtiyaca yönelik yazılmıştır. Arduino ve ya pic ile (ya da
seri porttan haberleşebilen tüm işlemciler) rahatlıkla çalışabilecek bir
uygulamadır. C# ile yapılan gerçek zamanlı (real time) uygulama eksikliğinden bu
konuyu yapma ihtiyacı hissettim. Ben bu konuyu araştırırken bu uygulamayı gerçek
zamanlı yapan ve sonra nasıl yapıldığını anlatan bir kaynak bulamamıştım.Umarım
bu bilgiler işinize yarar. Paylaşımlarınızda kaynak belirtirseniz çok iyi olur
:). Tekrar görüşmek üzere&mldr;</p><p><img src=https://4.bp.blogspot.com/-u9gyY6u78Ks/U4PnbJauzrI/AAAAAAAAAD4/hAhFH7f7JPo/s720/Ekran+Al%C4%B1nt%C4%B1s%C4%B12.PNG alt></p><p><strong>Not: Sonradan programın derlenmiş halini de paylaştım indirmek isterseniz
<a href=https://mozanunal.com/2014/12/serial-port-grapher/>buradaki yazıma</a> gitmeniz
yeterli olacaktır.</strong></p></div></article></main><footer><p>&copy; 2025 M.Ozan Unal.</p></footer></body><script async src="https://www.googletagmanager.com/gtag/js?id=G-007KSW65JL"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-007KSW65JL")}</script></html>