<!doctype html><html class="not-ready lg:text-base" style=--bg:#fbfbfb lang=en dir=ltr><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>PMod Microphone Driver - M.Ozan Unal</title>
<meta name=theme-color><meta name=description content="Hi
In this post, the Pmod microphone driver which is written in Verilog for Zynq boards is discussed. The driver is developed for Digilent Design Competition 2017. We have a project which microphone array is used. Therefore we have to get data from Pmod Mic also 5 of them should work synchronously. The microphone is sampled with an external ADC and this ADC is using basic SPI for communication. This module should be added to main FPGA code and you should make the connections required. clk/16 sample rate is succeeded for the microphone.  clk input frequency should select according to required sampling rate for the microphone. SS can be used as out enable also.  You can ask any question directly to me if you have a problem with the driver. See you&mldr;"><meta name=author content="Mehmet Ozan Ünal"><link rel="preload stylesheet" as=style href=https://mozanunal.com/main.min.css><link rel=preload as=image href=https://mozanunal.com/theme.svg><link rel=preload as=image href="https://www.gravatar.com/avatar/998cbd3ab655239d8be787580cce0415?s=160&amp;d=identicon"><link rel=preload as=image href=https://mozanunal.com/twitter.svg><link rel=preload as=image href=https://mozanunal.com/github.svg><link rel=preload as=image href=https://mozanunal.com/instagram.svg><link rel=preload as=image href=https://mozanunal.com/rss.svg><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css integrity=sha384-3UiQGuEI4TTMaFmGIZumfRPtfKQ3trwQE2JgosJxCnGmQpL/lJdjpcHkaaFwHlcI crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.js integrity=sha384-G0zcxDFp5LWZtDuRMnBkk3EphCK1lhEf4UEyEM693ka574TZGwo4IWwS6QLzM/2t crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",()=>renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1}))</script><link rel=icon href=https://mozanunal.com/favicon.ico><link rel=apple-touch-icon href=https://mozanunal.com/apple-touch-icon.png><meta name=generator content="Hugo 0.140.0"><script async src="https://www.googletagmanager.com/gtag/js?id=G-007KSW65JL"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-007KSW65JL")}</script><meta itemprop=name content="PMod Microphone Driver"><meta itemprop=description content="Hi
In this post, the Pmod microphone driver which is written in Verilog for Zynq boards is discussed. The driver is developed for Digilent Design Competition 2017. We have a project which microphone array is used. Therefore we have to get data from Pmod Mic also 5 of them should work synchronously. The microphone is sampled with an external ADC and this ADC is using basic SPI for communication. This module should be added to main FPGA code and you should make the connections required. clk/16 sample rate is succeeded for the microphone. clk input frequency should select according to required sampling rate for the microphone. SS can be used as out enable also. You can ask any question directly to me if you have a problem with the driver. See you…"><meta itemprop=datePublished content="2017-07-20T23:14:00+00:00"><meta itemprop=dateModified content="2017-07-20T23:14:00+00:00"><meta itemprop=wordCount content="250"><meta itemprop=keywords content="Electronics,FPGA"><meta property="og:url" content="https://mozanunal.com/2017/07/pmod-microphone-driver/"><meta property="og:site_name" content="M.Ozan Unal"><meta property="og:title" content="PMod Microphone Driver"><meta property="og:description" content="Hi
In this post, the Pmod microphone driver which is written in Verilog for Zynq boards is discussed. The driver is developed for Digilent Design Competition 2017. We have a project which microphone array is used. Therefore we have to get data from Pmod Mic also 5 of them should work synchronously. The microphone is sampled with an external ADC and this ADC is using basic SPI for communication. This module should be added to main FPGA code and you should make the connections required. clk/16 sample rate is succeeded for the microphone. clk input frequency should select according to required sampling rate for the microphone. SS can be used as out enable also. You can ask any question directly to me if you have a problem with the driver. See you…"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-07-20T23:14:00+00:00"><meta property="article:modified_time" content="2017-07-20T23:14:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="PMod Microphone Driver"><meta name=twitter:description content="Hi
In this post, the Pmod microphone driver which is written in Verilog for Zynq boards is discussed. The driver is developed for Digilent Design Competition 2017. We have a project which microphone array is used. Therefore we have to get data from Pmod Mic also 5 of them should work synchronously. The microphone is sampled with an external ADC and this ADC is using basic SPI for communication. This module should be added to main FPGA code and you should make the connections required. clk/16 sample rate is succeeded for the microphone. clk input frequency should select according to required sampling rate for the microphone. SS can be used as out enable also. You can ask any question directly to me if you have a problem with the driver. See you…"><link rel=canonical href=https://mozanunal.com/2017/07/pmod-microphone-driver/></head><body class="text-black duration-200 ease-out dark:text-white"><header class="mx-auto flex h-[4.5rem] max-w-[--w] px-8 lg:justify-center"><div class="relative z-50 ltr:mr-auto rtl:ml-auto flex items-center"><a class="-translate-y-[1px] text-2xl font-medium" href=https://mozanunal.com/>M.Ozan Unal</a><div class="btn-dark text-[0] ltr:ml-4 rtl:mr-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.svg)_left_center/cover_no-repeat] dark:invert dark:[background-position:right]" role=button aria-label=Dark></div></div><div class="btn-menu relative z-50 ltr:-mr-8 rtl:-ml-8 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden" role=button aria-label=Menu></div><script>const htmlClass=document.documentElement.classList;setTimeout(()=>{htmlClass.remove("not-ready")},10);const btnMenu=document.querySelector(".btn-menu");btnMenu.addEventListener("click",()=>{htmlClass.toggle("open")});const metaTheme=document.querySelector('meta[name="theme-color"]'),lightBg="#fbfbfb".replace(/"/g,""),setDark=e=>{metaTheme.setAttribute("content",e?"#000":lightBg),htmlClass[e?"add":"remove"]("dark"),localStorage.setItem("dark",e)},darkScheme=window.matchMedia("(prefers-color-scheme: dark)");if(htmlClass.contains("dark"))setDark(!0);else{const e=localStorage.getItem("dark");setDark(e?e==="true":darkScheme.matches)}darkScheme.addEventListener("change",e=>{setDark(e.matches)});const btnDark=document.querySelector(".btn-dark");btnDark.addEventListener("click",()=>{setDark(localStorage.getItem("dark")!=="true")})</script><div class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"><nav class="lg:ml-12 lg:flex lg:flex-row lg:items-center lg:space-x-10 rtl:space-x-reverse"><a class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal" href=/contact/>Contact</a></nav><nav class="mt-12 flex justify-center space-x-10 rtl:space-x-reverse dark:invert ltr:lg:ml-14 rtl:lg:mr-14 lg:mt-0 lg:items-center"><a class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./twitter.svg) href=https://twitter.com/MOzanUnal target=_blank rel=me>twitter
</a><a class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./github.svg) href=https://github.com/mozanunal target=_blank rel=me>github
</a><a class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./instagram.svg) href=https://instagram.com/mozanunal target=_blank rel=me>instagram
</a><a class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./rss.svg) href=https://mozanunal.com/index.xml target=_blank rel=alternate>rss</a></nav></div></header><main class="prose prose-neutral relative mx-auto min-h-[calc(100vh-9rem)] max-w-[--w] px-8 pb-16 pt-14 dark:prose-invert"><article><header class=mb-14><h1 class="!my-0 pb-2.5">PMod Microphone Driver</h1><div class="text-xs antialiased opacity-60"><time>Jul 20, 2017</time>
<span class=mx-1>&#183;</span>
<span>Mehmet Ozan Ünal</span></div></header><section><p><strong>Hi</strong></p><p>In this post, the Pmod microphone driver which is written in Verilog for Zynq boards is discussed. The driver is developed for Digilent Design Competition 2017. We have a project which microphone array is used. Therefore we have to get data from Pmod Mic also 5 of them should work synchronously. The microphone is sampled with an external ADC and this ADC is using basic SPI for communication. This module should be added to main FPGA code and you should make the connections required. clk/16 sample rate is succeeded for the microphone. clk input frequency should select according to required sampling rate for the microphone. SS can be used as out enable also. You can ask any question directly to me if you have a problem with the driver. See you&mldr;</p><p><img src=/images/pasted-0.png alt="pmod mic"></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-verilog data-lang=verilog><span style=display:flex><span>`timescale <span style=color:#bd93f9>1</span>ns <span style=color:#ff79c6>/</span> <span style=color:#bd93f9>1</span>ps
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4>//ADCS747x 1-MSPS, 12-Bit, 10-Bit, and 8-Bit A/D Converters
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>module</span> pmodMic3(
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>input</span> clk,
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>input</span> miso,
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>output</span> sck,
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>output</span> <span style=color:#8be9fd>reg</span> ss,
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>output</span> <span style=color:#8be9fd>reg</span> [<span style=color:#bd93f9>15</span><span style=color:#ff79c6>:</span><span style=color:#bd93f9>0</span>] out
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#8be9fd>reg</span> [<span style=color:#bd93f9>31</span><span style=color:#ff79c6>:</span><span style=color:#bd93f9>0</span>] clkCounter;
</span></span><span style=display:flex><span><span style=color:#8be9fd>reg</span> [<span style=color:#bd93f9>15</span><span style=color:#ff79c6>:</span><span style=color:#bd93f9>0</span>] outBuffer;
</span></span><span style=display:flex><span><span style=color:#ff79c6>assign</span> sck <span style=color:#ff79c6>=</span> clk;
</span></span><span style=display:flex><span><span style=color:#ff79c6>initial</span> clkCounter <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0</span>;
</span></span><span style=display:flex><span><span style=color:#ff79c6>initial</span> ss <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>always</span> @(<span style=color:#ff79c6>posedge</span> clk)
</span></span><span style=display:flex><span>   <span style=color:#ff79c6>begin</span>
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>if</span> (clkCounter <span style=color:#ff79c6>&lt;</span> <span style=color:#bd93f9>16</span>)
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>begin</span>
</span></span><span style=display:flex><span>                outBuffer[<span style=color:#bd93f9>15</span><span style=color:#ff79c6>-</span>clkCounter] <span style=color:#ff79c6>&lt;=</span> miso;
</span></span><span style=display:flex><span>                 clkCounter <span style=color:#ff79c6>=</span> clkCounter <span style=color:#ff79c6>+</span> <span style=color:#bd93f9>32</span><span style=color:#bd93f9>&#39;d1</span>;
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>end</span>
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>else</span> <span style=color:#ff79c6>if</span> (clkCounter <span style=color:#ff79c6>==</span> <span style=color:#bd93f9>16</span>)
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>begin</span>
</span></span><span style=display:flex><span>                out <span style=color:#ff79c6>&lt;=</span> outBuffer;
</span></span><span style=display:flex><span>                clkCounter <span style=color:#ff79c6>=</span> clkCounter <span style=color:#ff79c6>+</span> <span style=color:#bd93f9>32</span><span style=color:#bd93f9>&#39;d1</span>;
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>end</span>
</span></span><span style=display:flex><span>         <span style=color:#ff79c6>else</span> <span style=color:#ff79c6>if</span> (clkCounter <span style=color:#ff79c6>==</span> <span style=color:#bd93f9>17</span>)
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>begin</span>
</span></span><span style=display:flex><span>                clkCounter <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>32</span><span style=color:#bd93f9>&#39;d0</span>;
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>end</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span><span style=color:#ff79c6>always</span> @(<span style=color:#ff79c6>negedge</span> clk)
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>begin</span>
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>if</span> (clkCounter <span style=color:#ff79c6>==</span> <span style=color:#bd93f9>16</span>)
</span></span><span style=display:flex><span>          <span style=color:#ff79c6>begin</span>
</span></span><span style=display:flex><span>            ss <span style=color:#ff79c6>&lt;=</span> <span style=color:#bd93f9>1</span><span style=color:#bd93f9>&#39;b1</span>;
</span></span><span style=display:flex><span>          <span style=color:#ff79c6>end</span>
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>else</span> <span style=color:#ff79c6>if</span> (clkCounter <span style=color:#ff79c6>==</span> <span style=color:#bd93f9>0</span>)
</span></span><span style=display:flex><span>          <span style=color:#ff79c6>begin</span>
</span></span><span style=display:flex><span>            ss <span style=color:#ff79c6>&lt;=</span> <span style=color:#bd93f9>1</span><span style=color:#bd93f9>&#39;b0</span>;
</span></span><span style=display:flex><span>          <span style=color:#ff79c6>end</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>end</span> 
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#ff79c6>endmodule</span>
</span></span></code></pre></div><p><a href=https://github.com/mozanunal/PmodMIC3_Driver>Download from here</a></p></section><footer class="mt-12 flex flex-wrap"><a class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]" href=https://mozanunal.com/tags/pmod>Pmod</a>
<a class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]" href=https://mozanunal.com/tags/xilinx>xilinx</a>
<a class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]" href=https://mozanunal.com/tags/xillinx-vivado>xillinx vivado</a>
<a class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]" href=https://mozanunal.com/tags/zynq>zynq</a>
<a class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]" href=https://mozanunal.com/tags/pmod-mic>pmod mic</a>
<a class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]" href=https://mozanunal.com/tags/microphone-verilog>Microphone verilog</a></footer><nav class="mt-24 flex overflow-hidden rounded-xl bg-black/[3%] text-lg !leading-[1.2] *:flex *:w-1/2 *:items-center *:p-5 *:font-medium *:no-underline dark:bg-white/[8%] [&>*:hover]:bg-black/[2%] dark:[&>*:hover]:bg-white/[3%]"><a class="ltr:pr-3 rtl:pl-3" href=https://mozanunal.com/2017/07/hexo-blog-servisi-nedir/><span class="ltr:mr-1.5 rtl:ml-1.5">←</span><span>[TR] Hexo Blog Servisi Nedir</span></a>
<a class="ltr:ml-auto rtl:mr-auto justify-end pl-3" href=https://mozanunal.com/2017/07/google-hash-code-2017/><span>[TR] Google Hash Code 2017</span><span class="ltr:ml-1.5 rtl:mr-1.5">→</span></a></nav></article></main><footer class="mx-auto flex h-[4.5rem] max-w-[--w] items-center px-8 text-xs uppercase tracking-wider opacity-60"><div class=mr-auto>Copyright © 2014–2024</div><a class="link mx-6" href=https://gohugo.io/ rel=noopener target=_blank>powered by hugo️️</a>️
<a class=link href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>hugo-paper</a></footer></body></html>