<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><style>pre,code{font-family:fira code,courier new,monospace;font-size:.95rem}</style><link id=theme-style rel=stylesheet href=https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.classless.min.css><title>PMod Microphone Driver | mozanunal.com</title><link rel=icon href=/favicon.svg type=image/svg+xml><link rel="shortcut icon" href=/favicon.ico><link rel=apple-touch-icon href=/apple-touch-icon.png></head><body><header><div class=theme-selector><select id=theme-selector-input><option value=https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.classless.min.css>Pico</option><option value=https://cdn.jsdelivr.net/gh/digitallytailored/classless@latest/classless.min.css>Classless.css</option><option value=https://cdn.jsdelivr.net/gh/cspablocortez/cosmocss@latest/cosmo.min.css>Cosmo.css</option><option value=https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.fluid.classless.min.css>Pico-Fluid</option><option value=https://cdn.jsdelivr.net/npm/water.css@2/out/water.css>Water.css</option><option value=https://cdn.jsdelivr.net/npm/sakura.css/css/sakura.css>Sakura.css</option><option value=https://cdn.simplecss.org/simple.min.css>Simple.css</option><option value=https://cdn.jsdelivr.net/gh/alvaromontoro/almond.css@latest/dist/almond.min.css>Almond.css</option><option value=https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css>New.css</option><option value=https://unpkg.com/missing.css>Missing.css</option><option value=https://unpkg.com/boltcss/bolt.min.css>Bolt.css</option><option value=https://perfectmotherfuckingwebsite.com/fuckingstyle.css>PerfectMFWS</option><option value>HTML only</option></select></div><script>(function(){"use strict";const o=document.getElementById("theme-style"),e=document.getElementById("theme-selector-input"),n="hugo-classless-theme";function s(t){o.href=t,e&&(e.value=t)}const t=localStorage.getItem(n);if(t){const n=Array.from(e.options).some(e=>e.value===t);n&&s(t)}e&&e.addEventListener("change",()=>{const t=e.value;s(t),localStorage.setItem(n,t)})})()</script><div><h3>mozanunal.com</h3><h4><a href=/>Home</a> | <a href=/posts/>Posts</a> | <a href=/projects/>Projects</a> | <a href=/papers/>Papers</a> | <a href=/contact/>Contact</a></h4></div></header><main><article><header><h1>PMod Microphone Driver</h1><p><em><time datetime=2017-07-20>July 20, 2017</time></em></p></header><div><p><strong>Hi</strong></p><p>In this post, the Pmod microphone driver which is written in Verilog for Zynq
boards is discussed. The driver is developed for Digilent Design
Competition 2017. We have a project which microphone array is used. Therefore we
have to get data from Pmod Mic also 5 of them should work synchronously. The
microphone is sampled with an external ADC and this ADC is using basic SPI for
communication. This module should be added to main FPGA code and you should make
the connections required. clk/16 sample rate is succeeded for the microphone.
clk input frequency should select according to required sampling rate for the
microphone. SS can be used as out enable also. You can ask any question directly
to me if you have a problem with the driver. See you&mldr;</p><p><img src=/images/pasted-0.png alt="pmod mic"></p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-verilog data-lang=verilog><span style=display:flex><span><span style=color:#e06c75>`timescale</span> <span style=color:#d19a66>1</span><span style=color:#e06c75>ns</span> <span style=color:#56b6c2>/</span> <span style=color:#d19a66>1</span><span style=color:#e06c75>ps</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#7f848e>//ADCS747x 1-MSPS, 12-Bit, 10-Bit, and 8-Bit A/D Converters
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#c678dd>module</span> <span style=color:#e06c75>pmodMic3</span>(
</span></span><span style=display:flex><span>    <span style=color:#c678dd>input</span> <span style=color:#e06c75>clk</span>,
</span></span><span style=display:flex><span>    <span style=color:#c678dd>input</span> <span style=color:#e06c75>miso</span>,
</span></span><span style=display:flex><span>    <span style=color:#c678dd>output</span> <span style=color:#e06c75>sck</span>,
</span></span><span style=display:flex><span>    <span style=color:#c678dd>output</span> <span style=color:#e5c07b>reg</span> <span style=color:#e06c75>ss</span>,
</span></span><span style=display:flex><span>    <span style=color:#c678dd>output</span> <span style=color:#e5c07b>reg</span> [<span style=color:#d19a66>15</span><span style=color:#56b6c2>:</span><span style=color:#d19a66>0</span>] <span style=color:#e06c75>out</span>
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#e5c07b>reg</span> [<span style=color:#d19a66>31</span><span style=color:#56b6c2>:</span><span style=color:#d19a66>0</span>] <span style=color:#e06c75>clkCounter</span>;
</span></span><span style=display:flex><span><span style=color:#e5c07b>reg</span> [<span style=color:#d19a66>15</span><span style=color:#56b6c2>:</span><span style=color:#d19a66>0</span>] <span style=color:#e06c75>outBuffer</span>;
</span></span><span style=display:flex><span><span style=color:#c678dd>assign</span> <span style=color:#e06c75>sck</span> <span style=color:#56b6c2>=</span> <span style=color:#e06c75>clk</span>;
</span></span><span style=display:flex><span><span style=color:#c678dd>initial</span> <span style=color:#e06c75>clkCounter</span> <span style=color:#56b6c2>=</span> <span style=color:#d19a66>0</span>;
</span></span><span style=display:flex><span><span style=color:#c678dd>initial</span> <span style=color:#e06c75>ss</span> <span style=color:#56b6c2>=</span> <span style=color:#d19a66>0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#c678dd>always</span> @(<span style=color:#c678dd>posedge</span> <span style=color:#e06c75>clk</span>)
</span></span><span style=display:flex><span>   <span style=color:#c678dd>begin</span>
</span></span><span style=display:flex><span>        <span style=color:#c678dd>if</span> (<span style=color:#e06c75>clkCounter</span> <span style=color:#56b6c2>&lt;</span> <span style=color:#d19a66>16</span>)
</span></span><span style=display:flex><span>            <span style=color:#c678dd>begin</span>
</span></span><span style=display:flex><span>                <span style=color:#e06c75>outBuffer</span>[<span style=color:#d19a66>15</span><span style=color:#56b6c2>-</span><span style=color:#e06c75>clkCounter</span>] <span style=color:#56b6c2>&lt;=</span> <span style=color:#e06c75>miso</span>;
</span></span><span style=display:flex><span>                 <span style=color:#e06c75>clkCounter</span> <span style=color:#56b6c2>=</span> <span style=color:#e06c75>clkCounter</span> <span style=color:#56b6c2>+</span> <span style=color:#d19a66>32</span><span style=color:#d19a66>&#39;d1</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>end</span>
</span></span><span style=display:flex><span>        <span style=color:#c678dd>else</span> <span style=color:#c678dd>if</span> (<span style=color:#e06c75>clkCounter</span> <span style=color:#56b6c2>==</span> <span style=color:#d19a66>16</span>)
</span></span><span style=display:flex><span>            <span style=color:#c678dd>begin</span>
</span></span><span style=display:flex><span>                <span style=color:#e06c75>out</span> <span style=color:#56b6c2>&lt;=</span> <span style=color:#e06c75>outBuffer</span>;
</span></span><span style=display:flex><span>                <span style=color:#e06c75>clkCounter</span> <span style=color:#56b6c2>=</span> <span style=color:#e06c75>clkCounter</span> <span style=color:#56b6c2>+</span> <span style=color:#d19a66>32</span><span style=color:#d19a66>&#39;d1</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>end</span>
</span></span><span style=display:flex><span>         <span style=color:#c678dd>else</span> <span style=color:#c678dd>if</span> (<span style=color:#e06c75>clkCounter</span> <span style=color:#56b6c2>==</span> <span style=color:#d19a66>17</span>)
</span></span><span style=display:flex><span>            <span style=color:#c678dd>begin</span>
</span></span><span style=display:flex><span>                <span style=color:#e06c75>clkCounter</span> <span style=color:#56b6c2>=</span> <span style=color:#d19a66>32</span><span style=color:#d19a66>&#39;d0</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#c678dd>end</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span><span style=color:#c678dd>always</span> @(<span style=color:#c678dd>negedge</span> <span style=color:#e06c75>clk</span>)
</span></span><span style=display:flex><span>    <span style=color:#c678dd>begin</span>
</span></span><span style=display:flex><span>        <span style=color:#c678dd>if</span> (<span style=color:#e06c75>clkCounter</span> <span style=color:#56b6c2>==</span> <span style=color:#d19a66>16</span>)
</span></span><span style=display:flex><span>          <span style=color:#c678dd>begin</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>ss</span> <span style=color:#56b6c2>&lt;=</span> <span style=color:#d19a66>1</span><span style=color:#d19a66>&#39;b1</span>;
</span></span><span style=display:flex><span>          <span style=color:#c678dd>end</span>
</span></span><span style=display:flex><span>        <span style=color:#c678dd>else</span> <span style=color:#c678dd>if</span> (<span style=color:#e06c75>clkCounter</span> <span style=color:#56b6c2>==</span> <span style=color:#d19a66>0</span>)
</span></span><span style=display:flex><span>          <span style=color:#c678dd>begin</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>ss</span> <span style=color:#56b6c2>&lt;=</span> <span style=color:#d19a66>1</span><span style=color:#d19a66>&#39;b0</span>;
</span></span><span style=display:flex><span>          <span style=color:#c678dd>end</span>
</span></span><span style=display:flex><span>    <span style=color:#c678dd>end</span> 
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#c678dd>endmodule</span>
</span></span></code></pre></div><p><a href=https://github.com/mozanunal/PmodMIC3_Driver>Download from here</a></p></div></article></main><footer><p>&copy; 2025 M.Ozan Unal.</p></footer></body><script async src="https://www.googletagmanager.com/gtag/js?id=G-007KSW65JL"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-007KSW65JL")}</script></html>