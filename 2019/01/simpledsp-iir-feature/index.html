<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=description content="An example site for the clean and configurable Hugo Classless theme."><link rel=canonical href=https://mozanunal.com/2019/01/simpledsp-iir-feature/><link id=theme-style rel=stylesheet href=/css/classless.min.8cab153b82e5aafc291eef9470a782c75788db9fb12621ab48065a61682f0d2a.css integrity="sha256-jKsVO4LlqvwpHu+UcKeCx1eI25+xJiGrSAZaYWgvDSo="><link id=theme-style-dark rel=stylesheet href=/css/classless-dark.min.dfcff79e61518a7cd7fadd9ff9d784690eb5c3fc94e6d93e636ba054ec8e0ff1.css integrity="sha256-38/3nmFRinzX+t2f+deEaQ61w/yU5tk+Y2ugVOyOD/E=" media="(prefers-color-scheme: dark)"><style>#skip-link{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}#skip-link:focus{position:static;width:auto;height:auto;overflow:visible;padding:.5rem}pre code,code{-webkit-text-size-adjust:100%;text-size-adjust:100%}img{display:block;margin-left:auto;margin-right:auto}figcaption{display:block;margin-left:auto;margin-right:auto}header nav{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem;overflow:visible;padding:.5rem 0;margin-bottom:1rem;font-size:1.25rem}header nav ul{display:flex;list-style:none;padding:0;margin:0;gap:0;align-items:center}header nav ul li+li::before{content:"|";padding:0 .4rem;opacity:.4}@media(max-width:600px){header nav{flex-direction:column;align-items:flex-start;gap:.5rem}}.dark-mode-toggle{background:0 0;border:none;cursor:pointer;padding:.25rem;margin:0;min-height:auto;min-width:auto;display:inline-flex;align-items:center;justify-content:center;color:var(--body-color);border-radius:var(--border-radius);transition:var(--transition-base);box-shadow:none;line-height:1}.dark-mode-toggle:hover{opacity:.7;box-shadow:none}.dark-mode-toggle:active{transform:none;box-shadow:none;filter:none}.dark-mode-toggle:hover::after{background-color:initial}.dark-mode-toggle svg{width:1.25rem;height:1.25rem;fill:currentColor}.dark-mode-toggle .icon-sun{display:none}.dark-mode-toggle .icon-moon{display:none}.dark-mode-toggle .icon-system{display:block}html[data-theme=light] .dark-mode-toggle .icon-sun{display:block}html[data-theme=light] .dark-mode-toggle .icon-moon{display:none}html[data-theme=light] .dark-mode-toggle .icon-system{display:none}html[data-theme=dark] .dark-mode-toggle .icon-sun{display:none}html[data-theme=dark] .dark-mode-toggle .icon-moon{display:block}html[data-theme=dark] .dark-mode-toggle .icon-system{display:none}</style><link id=syntax-light rel=stylesheet href=/css/syntax-light.min.d1e9974bf1fe0f3bfae6a7af3a04c1e749276b8efbbf6d3397998585f82443f0.css media="(prefers-color-scheme: light)"><link id=syntax-dark rel=stylesheet href=/css/syntax-dark.min.22964c63865be9217cedda7ac3dbd0143f8f41b3a0f681ef71e845b18a33a4f3.css media="(prefers-color-scheme: dark)"><title>SimpleDSP: IIR Filter Feature Added | mozanunal.com</title><link rel=icon href=/favicon.svg type=image/svg+xml><link rel="shortcut icon" href=/favicon.ico><link rel=apple-touch-icon href=/apple-touch-icon.png><meta property="og:title" content="SimpleDSP: IIR Filter Feature Added"><meta property="og:description" content="An example site for the clean and configurable Hugo Classless theme."><meta property="og:type" content="article"><meta property="og:url" content="https://mozanunal.com/2019/01/simpledsp-iir-feature/"><meta property="og:site_name" content="mozanunal.com"><meta property="article:published_time" content="2019-01-23T23:45:00Z"><meta property="article:modified_time" content="2019-01-23T23:45:00Z"><meta property="article:tag" content="Arduino DSP"><meta property="article:tag" content="Arduino IIR"><meta property="article:tag" content="DSP"><meta property="article:tag" content="IIR filter"><meta property="article:tag" content="IIR filter design"><meta property="article:tag" content="Signal Processing"><meta name=twitter:card content="summary"><meta name=twitter:title content="SimpleDSP: IIR Filter Feature Added"><meta name=twitter:description content="An example site for the clean and configurable Hugo Classless theme."><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","author":{"@type":"Person","name":"M.Ozan Unal"},"dateModified":"2019-01-23T23:45:00Z","datePublished":"2019-01-23T23:45:00Z","description":"SimpleDSP SimpleDSP is a basic DSP library which is for Arduino and most of the microcontrollers which can be programmed in C/C++\nPerformance: Here is some …","headline":"SimpleDSP: IIR Filter Feature Added"}</script></head><body><a id=skip-link href=#main-content>Skip to content</a><header><nav aria-label="Main navigation"><ul><li><strong>mozanunal.com</strong></li></ul><ul><li><a href=/>Home</a></li><li><a href=/posts/>Posts</a></li><li><a href=/projects/>Projects</a></li><li><a href=/papers/>Papers</a></li><li><button class=dark-mode-toggle id=dark-mode-toggle aria-label="Toggle color scheme" title="Toggle color scheme">
<svg class="icon-moon" viewBox="0 0 24 24" fill="currentColor"><path d="M21.752 15.002A9.718 9.718.0 0118 15.75c-5.385.0-9.75-4.365-9.75-9.75.0-1.33.266-2.597.748-3.752A9.753 9.753.0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753.0 009.002-5.998z"/></svg>
<svg class="icon-sun" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.25a.75.75.0 01.75.75v2.25a.75.75.0 01-1.5.0V3a.75.75.0 01.75-.75zM7.5 12a4.5 4.5.0 119 0 4.5 4.5.0 01-9 0zM18.894 6.166a.75.75.0 00-1.06-1.06l-1.591 1.59a.75.75.0 101.06 1.061l1.591-1.59zM21.75 12a.75.75.0 01-.75.75h-2.25a.75.75.0 010-1.5H21a.75.75.0 01.75.75zm-3.916 6.894a.75.75.0 001.06-1.06l-1.59-1.591a.75.75.0 10-1.061 1.06l1.59 1.591zM12 18a.75.75.0 01.75.75V21a.75.75.0 01-1.5.0v-2.25A.75.75.0 0112 18zM7.758 17.303a.75.75.0 00-1.061-1.06l-1.591 1.59a.75.75.0 001.06 1.061l1.591-1.59zM6 12a.75.75.0 01-.75.75H3a.75.75.0 010-1.5h2.25A.75.75.0 016 12zm.697-4.243a.75.75.0 001.06-1.06l-1.59-1.591a.75.75.0 00-1.061 1.06l1.59 1.591z"/></svg>
<svg class="icon-system" viewBox="0 0 24 24" fill="currentColor"><path fill-rule="evenodd" d="M2.25 5.25a3 3 0 013-3h13.5a3 3 0 013 3V15a3 3 0 01-3 3h-3v.75A.75.75.0 0115 19.5H9a.75.75.0 01-.75-.75V18h-3a3 3 0 01-3-3V5.25zm1.5.0a1.5 1.5.0 011.5-1.5h13.5a1.5 1.5.0 011.5 1.5V15a1.5 1.5.0 01-1.5 1.5H5.25A1.5 1.5.0 013.75 15V5.25z" clip-rule="evenodd"/></svg></button></li><script>(function(){var e,o,t="hugo-classless-color-scheme";function n(e,t,n,s){if(!e)return;t==="dark"?e.media=s:t==="light"?e.media=n:e.media=e.getAttribute("data-default-media")||""}function s(e){document.documentElement.setAttribute("data-theme",e);var t,s=document.getElementById("syntax-light"),o=document.getElementById("syntax-dark");n(s,e,"all","not all"),n(o,e,"not all","all"),t=document.getElementById("theme-style-dark"),n(t,e,"not all","all")}function i(){["syntax-light","syntax-dark","theme-style-dark"].forEach(function(e){var t=document.getElementById(e);t&&!t.getAttribute("data-default-media")&&t.setAttribute("data-default-media",t.media||"")})}e=null;try{e=localStorage.getItem(t)}catch{}o=e==="light"||e==="dark"?e:"system",document.documentElement.setAttribute("data-theme",o),document.addEventListener("DOMContentLoaded",function(){i(),s(o);var e=document.getElementById("dark-mode-toggle");if(!e)return;e.addEventListener("click",function(){var e,n=document.documentElement.getAttribute("data-theme");n==="light"?e="dark":n==="dark"?e="system":e="light",s(e);try{e==="system"?localStorage.removeItem(t):localStorage.setItem(t,e)}catch{}})}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",function(){document.documentElement.getAttribute("data-theme")==="system"&&s("system")})})()</script></ul></nav></header><main id=main-content><article><p style=margin-bottom:0><a href=/>mozanunal.com</a>&nbsp;/&nbsp;<a href=https://mozanunal.com/posts/>Posts</a>&nbsp;/&nbsp;SimpleDSP: IIR Filter Feature Added</p><h1>SimpleDSP: IIR Filter Feature Added</h1><p><em><time datetime=2019-01-23>January 23, 2019</time>
&#183; 3 min read</em></p><div><h1 id=simpledsp><a href=https://github.com/mozanunal/SimpleDSP>SimpleDSP</a></h1><p><a href=https://github.com/mozanunal/SimpleDSP>SimpleDSP</a> is a basic DSP library which
is for Arduino and most of the microcontrollers which can be programmed in C/C++</p><h2 id=performance>Performance:</h2><p>Here is some examples for its performance. Actually it is not optimized for
performance. Its main focuses are portability and education.</p><h3 id=arduino-nano>Arduino Nano</h3><ul><li>FFT 16 points: 2 ms</li><li>FFT 32 points: 6 ms</li><li>FFT 64 points: 16 ms</li><li>fir filter 10 coefficients: 190 us</li><li>fir filter 23 coefficients: 453 us</li><li>fir filter 46 coefficients: 900 us</li></ul><p>10 coefficients FIR filter can be run at 5khz max frequency on an Arduino Nano.</p><h2 id=arduino-due>Arduino Due</h2><ul><li>FFT 64 points: 2 ms</li><li>FFT 128 points: 6 ms</li><li>FFT 256 points: 10 ms</li></ul><h2 id=fast-fourier-transform-fft-and-inverse-fast-fourier-transform-ifft>Fast Fourier Transform (FFT) and Inverse Fast Fourier Transform (IFFT)</h2><p><a href=https://en.m.wikipedia.org/wiki/Fast_Fourier_transform>detailed info</a></p><h3 id=arduino-example>Arduino Example</h3><p>FFT and IFFT functions require 2 arguments. data data length Do not forget to
add <code>#include "simpleDSP_FFT.h"</code></p><p><a href=/examples/fft_ifft/fft_ifft.ino>Full example for FFT and IFFT please refer here</a></p><p><a href=/examples/fft_spectrum/fft_spectrum.ino>FFT spectrum example</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=n>FFT</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=n>DATA_LEN</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>IFFT</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=n>DATA_LEN</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>calcTime</span> <span class=o>=</span> <span class=n>millis</span><span class=p>()</span><span class=o>-</span><span class=n>startTime</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>Serial</span><span class=p>.</span><span class=n>print</span><span class=p>(</span><span class=s>&#34;Total calculation time: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>Serial</span><span class=p>.</span><span class=n>println</span><span class=p>(</span><span class=n>calcTime</span><span class=p>);</span>
</span></span></code></pre></div><h2 id=fir-filter>FIR Filter</h2><h3 id=theory>Theory</h3><p><a href=https://en.wikipedia.org/wiki/Finite_impulse_response>detailed info</a></p><h3 id=arduino-example-1>Arduino Example</h3><p>FIR is filter structure which keep delays and coefficients of filter. There are
2 public functions. <code>firInit</code> initializes the structure according to parameters
and makes required memory allocations. Coefficients and its length are given as
parameter to this function Do not forget to add <code>#include "simpleDSP_fir.h"</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=kt>void</span> <span class=nf>firInit</span><span class=p>(</span><span class=n>FIR</span> <span class=o>*</span><span class=n>fir</span><span class=p>,</span> <span class=kt>int</span> <span class=n>coefBLen</span><span class=p>,</span> <span class=kt>float</span> <span class=o>*</span><span class=n>coefsB</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=nf>firFilt</span><span class=p>(</span><span class=n>FIR</span> <span class=o>*</span><span class=n>fir</span><span class=p>,</span> <span class=kt>int</span> <span class=n>input</span><span class=p>);</span>
</span></span></code></pre></div><p><a href=/examples/fir/fir.ino>FIR Full example</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=n>Serial</span><span class=p>.</span><span class=n>begin</span><span class=p>(</span><span class=mi>9600</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>firInit</span><span class=p>(</span><span class=o>&amp;</span><span class=n>fir1</span><span class=p>,</span> <span class=mi>46</span><span class=p>,</span> <span class=n>coef</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>Serial</span><span class=p>.</span><span class=n>println</span><span class=p>(</span><span class=s>&#34;FIR filter initiliaze finished&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>startTime</span> <span class=o>=</span> <span class=n>micros</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>255</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span> <span class=o>=</span> <span class=n>firFilt</span><span class=p>(</span><span class=o>&amp;</span><span class=n>fir1</span><span class=p>,</span> <span class=n>input</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>calcTime</span> <span class=o>=</span> <span class=n>micros</span><span class=p>()</span> <span class=o>-</span> <span class=n>startTime</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>Serial</span><span class=p>.</span><span class=n>print</span><span class=p>(</span><span class=s>&#34;Total calculation time: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>Serial</span><span class=p>.</span><span class=n>println</span><span class=p>(</span><span class=n>calcTime</span><span class=p>);</span>
</span></span></code></pre></div><h2 id=iir-filter>IIR Filter</h2><h3 id=theory-1>Theory</h3><p><a href=https://en.wikipedia.org/wiki/Infinite_impulse_response>detailed info</a></p><h3 id=arduino-example-2>Arduino Example</h3><p>IIR is filter structure which keep delays and coefficient of filter. There are 2
functions to implement IIR filter using SimpleDSP library. initIIR function is
the constructor function for the filter. Filter coefficients for a and b should
be given as arguments to this function. After init, filtIIR must be used as
filtering function. This function requires 2 arguments. Object instance and
data. It returns the filtered output.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=kt>void</span> <span class=nf>iirInit</span><span class=p>(</span><span class=n>IIR</span> <span class=o>*</span><span class=n>iir</span><span class=p>,</span> <span class=kt>int</span> <span class=n>coefBLen</span><span class=p>,</span> <span class=kt>float</span> <span class=o>*</span><span class=n>coefsB</span><span class=p>,</span> <span class=kt>int</span> <span class=n>coefALen</span><span class=p>,</span> <span class=kt>float</span> <span class=o>*</span><span class=n>coefsA</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=nf>iirFilt</span><span class=p>(</span><span class=n>IIR</span> <span class=o>*</span><span class=n>iir</span><span class=p>,</span> <span class=kt>int</span> <span class=n>input</span><span class=p>);</span>
</span></span></code></pre></div><p>Do not forget to add <code>#include "simpleDSP_iir.h"</code> to your code.</p><p><a href=/examples/iir/iir.ino>IIR Full example</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=n>Serial</span><span class=p>.</span><span class=n>begin</span><span class=p>(</span><span class=mi>9600</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>iirInit</span><span class=p>(</span><span class=o>&amp;</span><span class=n>iir1</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=n>coefB</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=n>coefA</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>Serial</span><span class=p>.</span><span class=n>println</span><span class=p>(</span><span class=s>&#34;IIR filter initiliaze finished&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>float</span> <span class=n>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>startTime</span> <span class=o>=</span> <span class=n>micros</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>255</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span> <span class=o>=</span> <span class=n>iirFilt</span><span class=p>(</span><span class=o>&amp;</span><span class=n>iir1</span><span class=p>,</span> <span class=n>input</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>calcTime</span> <span class=o>=</span> <span class=n>micros</span><span class=p>()</span> <span class=o>-</span> <span class=n>startTime</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>Serial</span><span class=p>.</span><span class=n>print</span><span class=p>(</span><span class=s>&#34;Total calculation time: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>Serial</span><span class=p>.</span><span class=n>println</span><span class=p>(</span><span class=n>calcTime</span><span class=p>);</span>
</span></span></code></pre></div><h2 id=octave-test-code>Octave Test Code</h2><p>This code create sample data and plot the signal and its FFT. The octave code
only needed for testing of function. Create sample signal which is at 10 kHz
sample rate and it is the combination of 3.2 kHz and 800 Hz sine waves.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-octave data-lang=octave><span class=line><span class=cl><span class=n>N</span><span class=p>=</span><span class=mi>255</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=n>f1</span><span class=p>=</span><span class=mi>800</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=n>f2</span><span class=p>=</span><span class=mi>3200</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=n>fo</span><span class=p>=</span><span class=mi>10000</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span><span class=p>=</span><span class=mi>1</span><span class=p>:</span><span class=mi>1</span><span class=p>:</span><span class=n>N</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=n>x</span><span class=p>(</span><span class=n>i</span><span class=p>)=</span><span class=mi>1000</span><span class=o>*</span><span class=nb>cos</span><span class=p>(</span><span class=mi>2</span><span class=o>*</span><span class=nb>pi</span><span class=o>*</span><span class=n>f1</span><span class=o>*</span><span class=n>i</span><span class=o>/</span><span class=n>fo</span><span class=p>)</span><span class=o>+</span><span class=mi>1000</span><span class=o>*</span><span class=nb>cos</span><span class=p>(</span><span class=mi>2</span><span class=o>*</span><span class=nb>pi</span><span class=o>*</span><span class=n>f2</span><span class=o>*</span><span class=n>i</span><span class=o>/</span><span class=n>fo</span><span class=p>);</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=nb>printf</span><span class=p>(</span><span class=s>&#34;%d\n&#34;</span><span class=p>,</span><span class=n>x</span><span class=p>(</span><span class=n>i</span><span class=p>));</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=k>end</span><span class=err>
</span></span></span></code></pre></div><p>Calculate and plot x and FFT of x. For fft x axis values are calculated using
<code>kor=(1:N)*fo/N;</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-octave data-lang=octave><span class=line><span class=cl><span class=nb>plot</span><span class=p>(</span><span class=n>x</span><span class=p>);</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=n>X</span><span class=p>=</span><span class=nb>abs</span><span class=p>(</span><span class=n>FFT</span><span class=p>(</span><span class=n>x</span><span class=p>));</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=nb>figure</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=n>kor</span><span class=p>=(</span><span class=mi>1</span><span class=p>:</span><span class=n>N</span><span class=p>)</span><span class=o>*</span><span class=n>fo</span><span class=o>/</span><span class=n>N</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=nb>plot</span><span class=p>(</span><span class=n>kor</span><span class=p>,</span><span class=n>X</span><span class=p>);</span><span class=err>
</span></span></span></code></pre></div><p><strong>Output from octave</strong></p><p>Graph of Raw Signal</p><p><img src=https://cloud.githubusercontent.com/assets/13440502/22374756/305a1d4e-e4b0-11e6-821a-9213b4f8a136.png alt=inputa></p><p>Graph of FFT Signal</p><p><img src=https://cloud.githubusercontent.com/assets/13440502/22374762/3abf9eee-e4b0-11e6-8e26-c0758e6c13a3.png alt=inputf></p><p><a href=octave-online.net>you can use octave from here</a></p><h3 id=filter-design-using-octave>Filter Design Using Octave</h3><p>output of fir functions can be used as filter coefficients</p><p><a href=https://octave.sourceforge.io/signal/function/fir1.html>Resource for FIR</a></p><p>Examples:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-octave data-lang=octave><span class=line><span class=cl><span class=nb>freqz</span> <span class=p>(</span><span class=n>fir1</span> <span class=p>(</span><span class=mi>40</span><span class=p>,</span> <span class=mf>0.3</span><span class=p>));</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=nb>freqz</span> <span class=p>(</span><span class=n>fir1</span> <span class=p>(</span><span class=mi>15</span><span class=p>,</span> <span class=p>[</span><span class=mf>0.2</span><span class=p>,</span> <span class=mf>0.5</span><span class=p>],</span> <span class=s>&#34;stop&#34;</span><span class=p>));</span>  <span class=c># note the zero-crossing at 0.1</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=nb>freqz</span> <span class=p>(</span><span class=n>fir1</span> <span class=p>(</span><span class=mi>15</span><span class=p>,</span> <span class=p>[</span><span class=mf>0.2</span><span class=p>,</span> <span class=mf>0.5</span><span class=p>],</span> <span class=s>&#34;stop&#34;</span><span class=p>,</span> <span class=s>&#34;noscale&#34;</span><span class=p>));</span><span class=err>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-octave data-lang=octave><span class=line><span class=cl><span class=nb>figure</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=n>b</span><span class=p>=</span> <span class=n>fir1</span> <span class=p>(</span><span class=mi>20</span><span class=p>,</span> <span class=mf>0.3</span><span class=p>,</span> <span class=s>&#34;low&#34;</span><span class=p>);</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=n>y</span> <span class=p>=</span> <span class=nb>filter</span><span class=p>(</span><span class=n>b</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=n>x</span><span class=p>);</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=nb>plot</span><span class=p>(</span><span class=n>y</span><span class=p>)</span><span class=err>
</span></span></span></code></pre></div><p>filter frequency response</p><p><img src=https://cloud.githubusercontent.com/assets/13440502/22388029/20f5a6fc-e4e7-11e6-99ed-885fe116be1d.png alt="function reference fir1"></p><p><a href=https://octave.sourceforge.io/signal/function/butter.html>Resource for IIR</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-octave data-lang=octave><span class=line><span class=cl><span class=nb>figure</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=p>[</span><span class=n>b</span><span class=p>,</span> <span class=n>a</span><span class=p>]</span> <span class=p>=</span> <span class=n>butter</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mf>0.3</span><span class=p>,</span> <span class=s>&#34;low&#34;</span><span class=p>);</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=n>y</span> <span class=p>=</span> <span class=nb>filter</span><span class=p>(</span><span class=n>b</span><span class=p>,</span><span class=n>a</span><span class=p>,</span><span class=n>x</span><span class=p>);</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=nb>plot</span><span class=p>(</span><span class=n>y</span><span class=p>)</span><span class=err>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>octave:&gt; b
</span></span><span class=line><span class=cl><span class=nv>b</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    0.049533      0.1486      0.1486    0.049533
</span></span><span class=line><span class=cl>octave:&gt; a
</span></span><span class=line><span class=cl><span class=nv>a</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   1.00000  -1.16192   0.69594  -0.13776
</span></span></code></pre></div><p><strong>Outputs after filtering</strong></p><p>Time Domain Signal</p><p><img src=https://cloud.githubusercontent.com/assets/13440502/22374514/24a63a88-e4af-11e6-8bd8-b7fa703bd459.png alt=output></p><p>FFT of Output Signal</p><p><img src=https://cloud.githubusercontent.com/assets/13440502/22374645/b0cbd266-e4af-11e6-9266-32aafec12986.png alt=outputf></p></div><hr><p><strong>Tags:</strong><a href=https://mozanunal.com/tags/arduino-dsp/>Arduino DSP</a>, <a href=https://mozanunal.com/tags/arduino-iir/>Arduino IIR</a>, <a href=https://mozanunal.com/tags/dsp/>DSP</a>, <a href=https://mozanunal.com/tags/iir-filter/>IIR Filter</a>, <a href=https://mozanunal.com/tags/iir-filter-design/>IIR Filter Design</a>, <a href=https://mozanunal.com/tags/signal-processing/>Signal Processing</a></p><hr><h3>Related Posts</h3><ul><li><a href=https://mozanunal.com/2017/04/simpledsp-fir-filtreleme-ozelligi/>[TR] SimpleDSP: FIR filtreleme özelliği eklendi</a></li><li><a href=https://mozanunal.com/2017/01/simpledsp-gomulu-sistemler-icin-dsp/>[TR] SimpleDSP: Gömülü Sistemler için DSP Kütühanesi</a></li></ul><hr><p><a href=https://mozanunal.com/2018/08/opizero-dump1090/>&larr; [TR] Orange Pi Zero Üzerinde Dump1090 Çalıştırmak</a> | <a href=https://mozanunal.com/2019/02/steam-link-on-rpi/>Playing DOTA on Raspberry Pi using Steam Link &rarr;</a></p></article></main><footer><p>&copy; 2026 M.Ozan Unal.</p></footer></body><link rel=stylesheet href=/libs/katex/katex.min.v0.16.9.css><script defer src=/libs/katex/katex.min.v0.16.9.js></script><script defer src=/libs/katex/auto-render.v0.16.9.js></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"\\(",right:"\\)",display:!1},{left:"$",right:"$",display:!1}],throwOnError:!1})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-007KSW65JL"></script><script>var doNotTrack=!1,dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-007KSW65JL")}</script></html>