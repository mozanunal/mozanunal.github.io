<!DOCTYPE html>
<html lang=en>
<head><meta name="generator" content="Hexo 3.8.0">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="Img2shHello there, In this post, I want to tell a brief story of how I have created a tool named img2sh. It is also my first python package which is published over PyPI. In this very post, I will try">
<meta name="keywords" content="linux,yazilim,bash script,ubuntu">
<meta property="og:type" content="article">
<meta property="og:title" content="Show Images Directly on Terminal: img2sh">
<meta property="og:url" content="https://mozanunal.com/2019/11/img2sh/index.html">
<meta property="og:site_name" content="Mehmet Ozan Ünal">
<meta property="og:description" content="Img2shHello there, In this post, I want to tell a brief story of how I have created a tool named img2sh. It is also my first python package which is published over PyPI. In this very post, I will try">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://user-images.githubusercontent.com/13440502/52919655-aa89d400-3315-11e9-8c4a-7a7e057b8fa4.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/13440502/59120360-e34dc780-895d-11e9-8b2a-1d7ea5b25fe4.gif">
<meta property="og:image" content="https://mozanunal.com/images/pixel.png">
<meta property="og:image" content="https://mozanunal.com/images/colorcodes.png">
<meta property="og:image" content="https://mozanunal.com/images/apple.jpeg">
<meta property="og:updated_time" content="2023-01-18T11:16:34.256Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Show Images Directly on Terminal: img2sh">
<meta name="twitter:description" content="Img2shHello there, In this post, I want to tell a brief story of how I have created a tool named img2sh. It is also my first python package which is published over PyPI. In this very post, I will try">
<meta name="twitter:image" content="https://user-images.githubusercontent.com/13440502/52919655-aa89d400-3315-11e9-8c4a-7a7e057b8fa4.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Show Images Directly on Terminal: img2sh</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
      <link rel="alternate" href="/atom" title="Mehmet Ozan Ünal" type="application/atom+xml">
    
    <script id="mcjs">!function(c,h,i,m,p){m=c.createElement(h),p=c.getElementsByTagName(h)[0],m.async=1,m.src=i,p.parentNode.insertBefore(m,p)}(document,"script","https://chimpstatic.com/mcjs-connected/js/users/7ecf5c9db13693c2c7062ad3f/0e72f59463de1883a2a166735.js");</script>
</head>

<body class="max-width mx-auto px3 ltr">    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/categories/">Category</a></li>
         
          <li><a href="/archives/">Blog</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="https://github.com/mozanunal">Projects</a></li>
         
          <li><a href="https://scholar.google.com/citations?user=u_HbXUUAAAAJ&hl=en">Publications</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </span>
    <br>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2019/11/ecg-signal/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2019/08/yoloColabDemo/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://mozanunal.com/2019/11/img2sh/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://mozanunal.com/2019/11/img2sh/&text=Show Images Directly on Terminal: img2sh"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://mozanunal.com/2019/11/img2sh/&title=Show Images Directly on Terminal: img2sh"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://mozanunal.com/2019/11/img2sh/&is_video=false&description=Show Images Directly on Terminal: img2sh"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Show Images Directly on Terminal: img2sh&body=Check out this article: https://mozanunal.com/2019/11/img2sh/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://mozanunal.com/2019/11/img2sh/&title=Show Images Directly on Terminal: img2sh"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://mozanunal.com/2019/11/img2sh/&title=Show Images Directly on Terminal: img2sh"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://mozanunal.com/2019/11/img2sh/&title=Show Images Directly on Terminal: img2sh"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://mozanunal.com/2019/11/img2sh/&title=Show Images Directly on Terminal: img2sh"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://mozanunal.com/2019/11/img2sh/&name=Show Images Directly on Terminal: img2sh&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Img2sh"><span class="toc-number">1.</span> <span class="toc-text">Img2sh</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Demo"><span class="toc-number">1.1.</span> <span class="toc-text">Demo</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Story"><span class="toc-number">1.2.</span> <span class="toc-text">Story</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Images"><span class="toc-number">1.2.1.</span> <span class="toc-text">Images</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Colors-in-terminal"><span class="toc-number">1.2.2.</span> <span class="toc-text">Colors in terminal</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Parsing-command-line-arguments"><span class="toc-number">1.2.3.</span> <span class="toc-text">Parsing command-line arguments</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Image-formats"><span class="toc-number">1.2.4.</span> <span class="toc-text">Image formats</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Setup-py"><span class="toc-number">1.2.5.</span> <span class="toc-text">Setup.py</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Uploading-python-package"><span class="toc-number">1.2.6.</span> <span class="toc-text">Uploading python package</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Optimizing-performance"><span class="toc-number">1.2.7.</span> <span class="toc-text">Optimizing performance</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Acknowledges"><span class="toc-number">1.3.</span> <span class="toc-text">Acknowledges</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Show Images Directly on Terminal: img2sh
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Mehmet Ozan Ünal</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2019-11-03T07:48:19.000Z" itemprop="datePublished">2019-11-03</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/Coding/">Coding</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h1 id="Img2sh"><a href="#Img2sh" class="headerlink" title="Img2sh"></a>Img2sh</h1><p>Hello there,</p>
<p><em>In this post, I want to tell a brief story of how I have created a tool named img2sh. It is also my first python package which is published over PyPI. In this very post, I will try to answer questions like:<br>How is it developed?<br>What are the challenges?<br>How should a package created and deployed over PyPI?<br>Let’s continue!</em></p>
<p>Img2sh is a tool to show images directly on the terminal. For colored images, 256 xterm color support is required. This script basically resizes the image with anti-aliasing and quantized its colors to xterm color pallette. <a href="https://github.com/mozanunal/img2sh" target="_blank" rel="noopener">Github repository of the project can be reached from here</a> </p>
<h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h2><p>Testing the package is super easy. Install using pip and run.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install img2sh --user</span><br><span class="line">img2sh demo.jpeg</span><br></pre></td></tr></table></figure>
<p>Result:</p>
<p><img src="https://user-images.githubusercontent.com/13440502/52919655-aa89d400-3315-11e9-8c4a-7a7e057b8fa4.png" alt> </p>
<p><strong>Interactive mode</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">img2sh demo.jpeg -w 80 -i</span><br><span class="line"></span><br><span class="line">q: quit z: zoom+ x: zoom- c: reset </span><br><span class="line">arrow keys <span class="keyword">for</span> navigation </span><br><span class="line">cmd: q</span><br></pre></td></tr></table></figure>
<p><img src="https://user-images.githubusercontent.com/13440502/59120360-e34dc780-895d-11e9-8b2a-1d7ea5b25fe4.gif" alt></p>
<p>For detailed usage arguments:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ python img2sh/cli.py --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line">usage: cli.py [-h] [-w WIDTH] [-i] Image</span><br><span class="line"></span><br><span class="line">Show images directly on terminal.</span><br><span class="line"></span><br><span class="line">positional arguments:</span><br><span class="line">  Image                 the directory of the image <span class="built_in">which</span> will be opened</span><br><span class="line"></span><br><span class="line">optional arguments:</span><br><span class="line">  -h, --<span class="built_in">help</span>            show this <span class="built_in">help</span> message and <span class="built_in">exit</span></span><br><span class="line">  -w WIDTH, --width WIDTH</span><br><span class="line">                        image width on the terminal</span><br><span class="line">  -i, --interactive     open image <span class="keyword">in</span> interactive mode</span><br></pre></td></tr></table></figure>
<h2 id="Story"><a href="#Story" class="headerlink" title="Story"></a>Story</h2><p>As it can be understood from its name, img2sh is a python app to show images directly in the terminal. I think it could be helpful when connected over ssh to a server with no desktop environment. The images can be examined quickly on the terminal screen.<br>While the tool was developed, the followings are the challenges I have encountered.</p>
<h3 id="Images"><a href="#Images" class="headerlink" title="Images"></a>Images</h3><p>In the digital world, images are made of pixels. Pixel is the smallest part of the image which can contain only one color. Color changes with the pixel intensity values. To keep it simple, I added a grayscale image to illustrate the pixel concept. It is a quite low resolution, grayscale image. Pixel values are shown in the following image. Pixel intensity values are changing with how far the pixel value close to black or white. </p>
<p><img src="/images/pixel.png" alt></p>
<p>Colored images basically work with the same concept. The difference is colored images are usually indicated with 3 different pixel values which are red, blue and green. By this method, the proportion of these color intensity is changed to show different colors on screen.</p>
<h3 id="Colors-in-terminal"><a href="#Colors-in-terminal" class="headerlink" title="Colors in terminal"></a>Colors in terminal</h3><p>How the coloring mechanism works in the terminal should be figured out to implement this app. I understood clearly how colors are handling in an image using the following link. After that, I have found colored python module which provides support for colored terminal output from python apps. I implement the colors using this library.</p>
<p><a href="http://jafrog.com/2013/11/23/colors-in-terminal.html" target="_blank" rel="noopener">http://jafrog.com/2013/11/23/colors-in-terminal.html</a></p>
<p><img src="/images/colorcodes.png" alt></p>
<h3 id="Parsing-command-line-arguments"><a href="#Parsing-command-line-arguments" class="headerlink" title="Parsing command-line arguments"></a>Parsing command-line arguments</h3><p>How should the command line arguments be parsed? Actually it is quite easy with python. Let’s examine the next code block:</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import argparse</span><br><span class="line"></span><br><span class="line">parser = argparse.ArgumentParser(</span><br><span class="line">    <span class="attribute">description</span>=<span class="string">'Show images directly on terminal.'</span>)</span><br><span class="line">parser.add_argument(<span class="string">"Image"</span>, <span class="attribute">help</span>=<span class="string">"the directory of the image which will be opened"</span>)</span><br><span class="line">parser.add_argument(</span><br><span class="line">    <span class="string">"-w"</span>, <span class="string">"--width"</span>,</span><br><span class="line">    <span class="attribute">help</span>=<span class="string">"image width on the terminal"</span>,</span><br><span class="line">    <span class="attribute">type</span>=int</span><br><span class="line">)</span><br><span class="line">parser.add_argument(</span><br><span class="line">    <span class="string">"-i"</span>, <span class="string">"--interactive"</span>,</span><br><span class="line">    <span class="attribute">default</span>=<span class="literal">False</span>, <span class="attribute">action</span>=<span class="string">'store_true'</span>,</span><br><span class="line">    <span class="attribute">help</span>=<span class="string">"open image in interactive mode"</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">args = parser.parse_args()</span><br></pre></td></tr></table></figure>
<p>After the initialization, arguments can be used with commands like <code>args.width</code>. The arguments can be configured as mandatory or optional and the type of argument also be specified. This package is a pretty useful and standard package that is widely used most of the python projects.</p>
<h3 id="Image-formats"><a href="#Image-formats" class="headerlink" title="Image formats"></a>Image formats</h3><p>For further improvement in the project, it should be solved how different image formats can handle. Fortunately, Pillow package can handle various kinds of image formats such as jpeg, png, tiff. This packet can provide pixel values for different image types using the same get_pixel method interface. However, the problem is the dimension of the color values are representing. At standard jpeg a pixel value is represented with 24 bits which are 3 bytes. Each byte value represents a different color channels Red, Blue, and Green. Png differs from the alpha channel. At PNG images, colors are created with 4 bytes. Red, Blue, Green, and Alpha. Alpha is the transparency channel of the image. So the dimension of the pixel is different. But this problem is easily solved in findNearestColor function. In these functions, the dimension of the pixel is handled.</p>
<p><img src="/images/apple.jpeg" alt></p>
<h3 id="Setup-py"><a href="#Setup-py" class="headerlink" title="Setup.py"></a>Setup.py</h3><p>In this section, I will try to answer the question that how to create a setup.py file which supports also entry point and can be executed without python shell. Setup.py file is used to define the python package metadata and its installation instructions. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> setuptools <span class="keyword">import</span> setup, find_packages</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'requirements.txt'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    requirements = f.read().splitlines()</span><br><span class="line"></span><br><span class="line">setup(</span><br><span class="line">    name=<span class="string">'img2sh'</span>,</span><br><span class="line">    version=__import__(<span class="string">'img2sh'</span>).__version__,</span><br><span class="line">    install_requires=requirements,</span><br><span class="line">    description=(</span><br><span class="line">        <span class="string">'Show images directly on terminal using Xterm colors.'</span></span><br><span class="line">    ),</span><br><span class="line">    long_description=open(<span class="string">'README.md'</span>).read(),</span><br><span class="line">    long_description_content_type=<span class="string">'text/markdown'</span>,</span><br><span class="line">    author=<span class="string">"Mehmet Ozan Unal"</span>,</span><br><span class="line">    author_email=<span class="string">'mehmetozanunal@gmail.com'</span>,</span><br><span class="line">    maintainer=<span class="string">"Mehmet Ozan Unal"</span>,</span><br><span class="line">    maintainer_email=<span class="string">'mehmetozanunal@gmail.com'</span>,</span><br><span class="line">    license=<span class="string">"MIT"</span>,</span><br><span class="line">    packages=find_packages(),</span><br><span class="line">    platforms=[<span class="string">"all"</span>],</span><br><span class="line">    url=<span class="string">'https://github.com/mozanunal/img2sh'</span>,</span><br><span class="line">    classifiers=[</span><br><span class="line">        <span class="string">'Development Status :: 4 - Beta'</span>,</span><br><span class="line">        <span class="string">'Operating System :: OS Independent'</span>,</span><br><span class="line">        <span class="string">'Intended Audience :: Developers'</span>,</span><br><span class="line">        <span class="string">'License :: OSI Approved :: BSD License'</span>,</span><br><span class="line">        <span class="string">'Programming Language :: Python'</span>,</span><br><span class="line">        <span class="string">'Programming Language :: Python :: Implementation'</span>,</span><br><span class="line">        <span class="string">'Programming Language :: Python :: 2'</span>,</span><br><span class="line">        <span class="string">'Programming Language :: Python :: 2.7'</span>,</span><br><span class="line">        <span class="string">'Programming Language :: Python :: 3'</span>,</span><br><span class="line">        <span class="string">'Programming Language :: Python :: 3.4'</span>,</span><br><span class="line">        <span class="string">'Programming Language :: Python :: 3.5'</span>,</span><br><span class="line">        <span class="string">'Programming Language :: Python :: 3.6'</span>,</span><br><span class="line">        <span class="string">'Programming Language :: Python :: 3.7'</span>,</span><br><span class="line">        <span class="string">'Topic :: Software Development :: Libraries'</span></span><br><span class="line">    ],</span><br><span class="line">    entry_points=&#123;</span><br><span class="line">        <span class="string">'console_scripts'</span>: [<span class="string">'img2sh=img2sh.cli:main'</span>],</span><br><span class="line">    &#125;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>The entry points of the module can be specified with specifying entry_points property of the object. It is defined as console script and first, the name of the executable should be written. It should be mapped to the executable python function. In my case, it is img2sh:cli:main.</p>
<p>There are useful tricks in the code block also. For example, you do not have to write a whole long description of this file. It can be read from different files like <code>README.md</code>. It is the same for your requirements. It still can be read from requirements.txt but with one condition. These files should be specified in the MANIFEST.in file. </p>
<p>MANIFEST.in</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">include README.md</span><br><span class="line">include requirements.txt</span><br><span class="line">include LICENCE</span><br></pre></td></tr></table></figure>
<p>The following link great resource to create a setup.py file. I learned from here. You should check it out.<br><a href="https://python-packaging.readthedocs.io/en/latest/everything.html" target="_blank" rel="noopener">https://python-packaging.readthedocs.io/en/latest/everything.html</a></p>
<h3 id="Uploading-python-package"><a href="#Uploading-python-package" class="headerlink" title="Uploading python package"></a>Uploading python package</h3><p>As you may already know, python packages are usually distributed using PyPI servers. When we use the pip package manager in default, packages are downloaded from this server. In this project, I want that my package can be installed over PyPI. So I created a PyPI account and upload my package there.<br>to Uploading the PyPI package actually quite simple. The following commands are required to create a package from a module and to upload it to PyPI servers.<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python setup<span class="selector-class">.py</span> sdist bdist_wheel</span><br><span class="line">twine upload --repository-url https:<span class="comment">//upload.pypi.org/legacy/ dist/*</span></span><br></pre></td></tr></table></figure></p>
<h3 id="Optimizing-performance"><a href="#Optimizing-performance" class="headerlink" title="Optimizing performance"></a>Optimizing performance</h3><p>How can be the performance of the tool optimized?<br>In the first prototype, the code is written with simple logic. This causes too much processing time because of the for loops inside it. The following code part is written to find the nearest color inside a palette. The function loops in pallette and tries to find the smallest distance. In version 2, I implement it using numpy package. The operation executes in vectorial form and its execution time decreased exponentially.<br>v1</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">findNearestColor</span><span class="params">(color, pallette)</span>:</span></span><br><span class="line">    distances = []</span><br><span class="line">    <span class="keyword">if</span> len(color) == <span class="number">3</span>:</span><br><span class="line">        (colorr, colorg, colorb) = color</span><br><span class="line">    <span class="keyword">elif</span> len(color) == <span class="number">4</span>:</span><br><span class="line">        (colorr, colorg, colorb, alpha) = color</span><br><span class="line">        <span class="keyword">if</span> alpha == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span>  <span class="comment"># pallette.index((255,255,255))</span></span><br><span class="line">    <span class="keyword">for</span> c <span class="keyword">in</span> pallette:</span><br><span class="line">        (cr, cg, cb) = c</span><br><span class="line">        distances.append(</span><br><span class="line">            (colorr-cr)**<span class="number">2</span> +</span><br><span class="line">            (colorg-cg)**<span class="number">2</span> +</span><br><span class="line">            (colorb-cb)**<span class="number">2</span></span><br><span class="line">        )</span><br><span class="line">    <span class="keyword">return</span> distances.index(min(distances))</span><br></pre></td></tr></table></figure>
<p>v2</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">findNearestColor</span><span class="params">(color, pallette)</span>:</span></span><br><span class="line">    distances = []</span><br><span class="line">    <span class="keyword">if</span> len(color) == <span class="number">3</span>:</span><br><span class="line">        (colorr, colorg, colorb) = color</span><br><span class="line">    <span class="keyword">elif</span> len(color) == <span class="number">4</span>:</span><br><span class="line">        (colorr, colorg, colorb, alpha) = color</span><br><span class="line">        <span class="keyword">if</span> alpha == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span>  <span class="comment"># pallette.index((255,255,255))</span></span><br><span class="line">    c = (colorr, colorg, colorb)</span><br><span class="line">    diff = pallette - c</span><br><span class="line">    diffSum = np.sum( np.square(diff), axis=<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> np.argmin(diffSum)</span><br></pre></td></tr></table></figure>
<pre><code class="bash"><span class="comment"># for v1</span>
real 0m2,618s
user 0m2,519s
sys 0m0,080s

<span class="comment"># for v2</span>
real 0m1,690s
user 0m1,892s
sys 0m0,417s
</code></pre>
<p>Thank you for your interest. See you later…</p>
<h2 id="Acknowledges"><a href="#Acknowledges" class="headerlink" title="Acknowledges"></a>Acknowledges</h2><p>This package is developed using:</p>
<ul>
<li><a href="https://pillow.readthedocs.io/en/stable/installation.html" target="_blank" rel="noopener">Pillow</a></li>
<li><a href="https://gitlab.com/dslackw/colored" target="_blank" rel="noopener">colored</a></li>
</ul>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/categories/">Category</a></li>
         
          <li><a href="/archives/">Blog</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="https://github.com/mozanunal">Projects</a></li>
         
          <li><a href="https://scholar.google.com/citations?user=u_HbXUUAAAAJ&hl=en">Publications</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Img2sh"><span class="toc-number">1.</span> <span class="toc-text">Img2sh</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Demo"><span class="toc-number">1.1.</span> <span class="toc-text">Demo</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Story"><span class="toc-number">1.2.</span> <span class="toc-text">Story</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Images"><span class="toc-number">1.2.1.</span> <span class="toc-text">Images</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Colors-in-terminal"><span class="toc-number">1.2.2.</span> <span class="toc-text">Colors in terminal</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Parsing-command-line-arguments"><span class="toc-number">1.2.3.</span> <span class="toc-text">Parsing command-line arguments</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Image-formats"><span class="toc-number">1.2.4.</span> <span class="toc-text">Image formats</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Setup-py"><span class="toc-number">1.2.5.</span> <span class="toc-text">Setup.py</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Uploading-python-package"><span class="toc-number">1.2.6.</span> <span class="toc-text">Uploading python package</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Optimizing-performance"><span class="toc-number">1.2.7.</span> <span class="toc-text">Optimizing performance</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Acknowledges"><span class="toc-number">1.3.</span> <span class="toc-text">Acknowledges</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://mozanunal.com/2019/11/img2sh/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://mozanunal.com/2019/11/img2sh/&text=Show Images Directly on Terminal: img2sh"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://mozanunal.com/2019/11/img2sh/&title=Show Images Directly on Terminal: img2sh"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://mozanunal.com/2019/11/img2sh/&is_video=false&description=Show Images Directly on Terminal: img2sh"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Show Images Directly on Terminal: img2sh&body=Check out this article: https://mozanunal.com/2019/11/img2sh/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://mozanunal.com/2019/11/img2sh/&title=Show Images Directly on Terminal: img2sh"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://mozanunal.com/2019/11/img2sh/&title=Show Images Directly on Terminal: img2sh"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://mozanunal.com/2019/11/img2sh/&title=Show Images Directly on Terminal: img2sh"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://mozanunal.com/2019/11/img2sh/&title=Show Images Directly on Terminal: img2sh"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://mozanunal.com/2019/11/img2sh/&name=Show Images Directly on Terminal: img2sh&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2023 Mehmet Ozan Ünal
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/categories/">Category</a></li>
         
          <li><a href="/archives/">Blog</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="https://github.com/mozanunal">Projects</a></li>
         
          <li><a href="https://scholar.google.com/citations?user=u_HbXUUAAAAJ&hl=en">Publications</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

    <!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-60655125-2', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Baidu Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'mozanunal-com';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


</body>
</html>
