<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=description content="An example site for the clean and configurable Hugo Classless theme."><link rel=canonical href=https://mozanunal.com/2016/06/passface-face-recognition-using-opencv/><link id=theme-style rel=stylesheet href=/css/classless.min.8cab153b82e5aafc291eef9470a782c75788db9fb12621ab48065a61682f0d2a.css integrity="sha256-jKsVO4LlqvwpHu+UcKeCx1eI25+xJiGrSAZaYWgvDSo="><link id=theme-style-dark rel=stylesheet href=/css/classless-dark.min.dfcff79e61518a7cd7fadd9ff9d784690eb5c3fc94e6d93e636ba054ec8e0ff1.css integrity="sha256-38/3nmFRinzX+t2f+deEaQ61w/yU5tk+Y2ugVOyOD/E=" media="(prefers-color-scheme: dark)"><style>#skip-link{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}#skip-link:focus{position:static;width:auto;height:auto;overflow:visible;padding:.5rem}pre code,code{-webkit-text-size-adjust:100%;text-size-adjust:100%}img{display:block;margin-left:auto;margin-right:auto}figcaption{display:block;margin-left:auto;margin-right:auto}header nav{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem;overflow:visible;padding:.5rem 0;margin-bottom:1rem;font-size:1.25rem}header nav ul{display:flex;list-style:none;padding:0;margin:0;gap:0;align-items:center}header nav ul li+li::before{content:"|";padding:0 .4rem;opacity:.4}@media(max-width:600px){header nav{flex-direction:column;align-items:flex-start;gap:.5rem}}.dark-mode-toggle{background:0 0;border:none;cursor:pointer;padding:.25rem;margin:0;min-height:auto;min-width:auto;display:inline-flex;align-items:center;justify-content:center;color:var(--body-color);border-radius:var(--border-radius);transition:var(--transition-base);box-shadow:none;line-height:1}.dark-mode-toggle:hover{opacity:.7;box-shadow:none}.dark-mode-toggle:active{transform:none;box-shadow:none;filter:none}.dark-mode-toggle:hover::after{background-color:initial}.dark-mode-toggle svg{width:1.25rem;height:1.25rem;fill:currentColor}.dark-mode-toggle .icon-sun{display:none}.dark-mode-toggle .icon-moon{display:none}.dark-mode-toggle .icon-system{display:block}html[data-theme=light] .dark-mode-toggle .icon-sun{display:block}html[data-theme=light] .dark-mode-toggle .icon-moon{display:none}html[data-theme=light] .dark-mode-toggle .icon-system{display:none}html[data-theme=dark] .dark-mode-toggle .icon-sun{display:none}html[data-theme=dark] .dark-mode-toggle .icon-moon{display:block}html[data-theme=dark] .dark-mode-toggle .icon-system{display:none}</style><link id=syntax-light rel=stylesheet href=/css/syntax-light.min.d1e9974bf1fe0f3bfae6a7af3a04c1e749276b8efbbf6d3397998585f82443f0.css media="(prefers-color-scheme: light)"><link id=syntax-dark rel=stylesheet href=/css/syntax-dark.min.22964c63865be9217cedda7ac3dbd0143f8f41b3a0f681ef71e845b18a33a4f3.css media="(prefers-color-scheme: dark)"><title>PassFace: Face Recognition Using OpenCV | mozanunal.com</title><link rel=icon href=/favicon.svg type=image/svg+xml><link rel="shortcut icon" href=/favicon.ico><link rel=apple-touch-icon href=/apple-touch-icon.png><meta property="og:title" content="PassFace: Face Recognition Using OpenCV"><meta property="og:description" content="An example site for the clean and configurable Hugo Classless theme."><meta property="og:type" content="article"><meta property="og:url" content="https://mozanunal.com/2016/06/passface-face-recognition-using-opencv/"><meta property="og:site_name" content="mozanunal.com"><meta property="article:published_time" content="2016-06-04T19:50:00Z"><meta property="article:modified_time" content="2016-06-04T19:50:00Z"><meta property="article:tag" content="Image Processing"><meta property="article:tag" content="EmguCV"><meta property="article:tag" content="opencv"><meta property="article:tag" content="Eigenfaces"><meta property="article:tag" content="Face recognition"><meta property="article:tag" content="Fisgerfaces"><meta name=twitter:card content="summary"><meta name=twitter:title content="PassFace: Face Recognition Using OpenCV"><meta name=twitter:description content="An example site for the clean and configurable Hugo Classless theme."><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","author":{"@type":"Person","name":"M.Ozan Unal"},"dateModified":"2016-06-04T19:50:00Z","datePublished":"2016-06-04T19:50:00Z","description":"Hi,\nPassFace is a face recognizing program develop using EmguCV (OpenCV wrapper). It is possible to use 4 different algorithm and 3 different source(Camera, …","headline":"PassFace: Face Recognition Using OpenCV"}</script></head><body><a id=skip-link href=#main-content>Skip to content</a><header><nav aria-label="Main navigation"><ul><li><strong>mozanunal.com</strong></li></ul><ul><li><a href=/>Home</a></li><li><a href=/posts/>Posts</a></li><li><a href=/projects/>Projects</a></li><li><a href=/papers/>Papers</a></li><li><button class=dark-mode-toggle id=dark-mode-toggle aria-label="Toggle color scheme" title="Toggle color scheme">
<svg class="icon-moon" viewBox="0 0 24 24" fill="currentColor"><path d="M21.752 15.002A9.718 9.718.0 0118 15.75c-5.385.0-9.75-4.365-9.75-9.75.0-1.33.266-2.597.748-3.752A9.753 9.753.0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753.0 009.002-5.998z"/></svg>
<svg class="icon-sun" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.25a.75.75.0 01.75.75v2.25a.75.75.0 01-1.5.0V3a.75.75.0 01.75-.75zM7.5 12a4.5 4.5.0 119 0 4.5 4.5.0 01-9 0zM18.894 6.166a.75.75.0 00-1.06-1.06l-1.591 1.59a.75.75.0 101.06 1.061l1.591-1.59zM21.75 12a.75.75.0 01-.75.75h-2.25a.75.75.0 010-1.5H21a.75.75.0 01.75.75zm-3.916 6.894a.75.75.0 001.06-1.06l-1.59-1.591a.75.75.0 10-1.061 1.06l1.59 1.591zM12 18a.75.75.0 01.75.75V21a.75.75.0 01-1.5.0v-2.25A.75.75.0 0112 18zM7.758 17.303a.75.75.0 00-1.061-1.06l-1.591 1.59a.75.75.0 001.06 1.061l1.591-1.59zM6 12a.75.75.0 01-.75.75H3a.75.75.0 010-1.5h2.25A.75.75.0 016 12zm.697-4.243a.75.75.0 001.06-1.06l-1.59-1.591a.75.75.0 00-1.061 1.06l1.59 1.591z"/></svg>
<svg class="icon-system" viewBox="0 0 24 24" fill="currentColor"><path fill-rule="evenodd" d="M2.25 5.25a3 3 0 013-3h13.5a3 3 0 013 3V15a3 3 0 01-3 3h-3v.75A.75.75.0 0115 19.5H9a.75.75.0 01-.75-.75V18h-3a3 3 0 01-3-3V5.25zm1.5.0a1.5 1.5.0 011.5-1.5h13.5a1.5 1.5.0 011.5 1.5V15a1.5 1.5.0 01-1.5 1.5H5.25A1.5 1.5.0 013.75 15V5.25z" clip-rule="evenodd"/></svg></button></li><script>(function(){var e,o,t="hugo-classless-color-scheme";function n(e,t,n,s){if(!e)return;t==="dark"?e.media=s:t==="light"?e.media=n:e.media=e.getAttribute("data-default-media")||""}function s(e){document.documentElement.setAttribute("data-theme",e);var t,s=document.getElementById("syntax-light"),o=document.getElementById("syntax-dark");n(s,e,"all","not all"),n(o,e,"not all","all"),t=document.getElementById("theme-style-dark"),n(t,e,"not all","all")}function i(){["syntax-light","syntax-dark","theme-style-dark"].forEach(function(e){var t=document.getElementById(e);t&&!t.getAttribute("data-default-media")&&t.setAttribute("data-default-media",t.media||"")})}e=null;try{e=localStorage.getItem(t)}catch{}o=e==="light"||e==="dark"?e:"system",document.documentElement.setAttribute("data-theme",o),document.addEventListener("DOMContentLoaded",function(){i(),s(o);var e=document.getElementById("dark-mode-toggle");if(!e)return;e.addEventListener("click",function(){var e,n=document.documentElement.getAttribute("data-theme");n==="light"?e="dark":n==="dark"?e="system":e="light",s(e);try{e==="system"?localStorage.removeItem(t):localStorage.setItem(t,e)}catch{}})}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",function(){document.documentElement.getAttribute("data-theme")==="system"&&s("system")})})()</script></ul></nav></header><main id=main-content><article><p style=margin-bottom:0><a href=/>mozanunal.com</a>&nbsp;/&nbsp;<a href=https://mozanunal.com/posts/>Posts</a>&nbsp;/&nbsp;PassFace: Face Recognition Using OpenCV</p><h1>PassFace: Face Recognition Using OpenCV</h1><p><em><time datetime=2016-06-04>June 4, 2016</time>
&#183; 7 min read</em></p><details><summary>Table of Contents</summary><nav id=TableOfContents><ul><li><ul><li></li></ul></li></ul></nav></details><div><p><strong>Hi,</strong><br>PassFace is a face recognizing program develop using EmguCV (OpenCV wrapper). It
is possible to use 4 different algorithm and 3 different source(Camera, Video,
Image) in this program. Most of the tryings have been made using LFW data set
which have 13000 pictures of 1500 different people.Details of project can be
reached below:</p><p>Source Code:
<a href=https://github.com/mozanunal/PassFace>https://github.com/mozanunal/PassFace</a></p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading=eager referrerpolicy=strict-origin-when-cross-origin src="https://www.youtube.com/embed/d6LI42NEZZY??autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 title="YouTube video"></iframe></div><h4 id=1-introduction>1. Introduction</h4><h5 id=definition-of-the-problem>Definition of the Problem</h5><p>In this project, a program is going to develop to recognize the faces and
compare them the faces it learned and give the identity of the person. All this
identifying system is going to work in real time. Main subjects in this project
are image processing and machine learning. Project aim to develop some algorithm
to detect faces specifically recognize the faces using pattern recognition
algorithms. The number of faces and the equipment needed is going to be
determined according to test of different algorithms.</p><h5 id=motivation>Motivation</h5><p>To detect identity of person from images is very beneficial subject. It can
provide easy access to users. It can be used for detect criminals and prevent
potential crimes. Also I see this subject in a lot of industrial projects and
academic researches. I want to work with real world problem and problem which is
not completely solved. Therefore I decided to work with this project.</p><h5 id=difficulties-of-problem>Difficulties of Problem</h5><p>Main difficulties can be sorted like below:</p><ul><li>Faces are not completely rigid objects so it is hard to recognize them.</li><li>The more person in database needs more and more processing power.</li><li>Blurry images because of real time system</li><li>The effects of ambient light</li><li>Changes in person’s face over time</li></ul><h5 id=data-sets>Data Sets</h5><p><a href=https://www.cl.cam.ac.uk/research/dtg/attarchive/facedatabase.html>AT&amp;T Facedatabase</a></p><p>The AT&amp;T Face Database, sometimes also referred to as ORL Database of Faces,
contains ten different images of each of 40 distinct subjects. For some
subjects, the images were taken at different times, varying the lighting, facial
expressions (open / closed eyes, smiling / not smiling) and facial details
(glasses / no glasses). All the images were taken against a dark homogeneous
background with the subjects in an upright, frontal position (with tolerance for
some side movement).</p><p><a href=https://vision.ucsd.edu/content/yale-face-database>Yale Facedatabase A</a></p><p>also known as Yalefaces. The AT&amp;T Face Database is good for initial tests, but
it’s a fairly easy database. The Eigenfaces method already has a 97% recognition
rate on it, so you won’t see any great improvements with other algorithms. The
Yale Face Database A (also known as Yalefaces) is a more appropriate dataset for
initial experiments, because the recognition problem is harder. The database
consists of 15 people (14 male, 1 female) each with 11 grayscale images sized
320x243
<a href=https://lh3.googleusercontent.com/uNq7mPqspjvR267h-aZA2FS666Fl8Q8dXGhlg-Lzi7MJiNn5DkSyioK59Wj6pdA9h96bojY8L02LR-NIXIeuf0IjN-a6MYN7ufWHMOPqVbxd0hvoGcKsy0oR9jo5t85MGbfqOB9H></a>pixel.
There are changes in the light conditions (center light, left light, right
light), facial expressions (happy, normal, sad, sleepy, surprised, wink) and
glasses (glasses, no-glasses).</p><p><a href>Labeled Faces in the Wild</a></p><p>A database of face photographs designed for studying the problem of
unconstrained face recognition. The data set contains more than 13,000 images of
faces collected from the web. Each face has been labeled with the name of the
person pictured. 1680 of the people pictured have two or more distinct photos in
the data set. The only constraint on these faces is that they were detected by
the Viola-Jones face detector..</p><h5 id=programming-environment-and-libraries>Programming Environment and Libraries</h5><p>Visual Studio IDE is used for project. The program is written in C# using OpenCV
libraries.</p><h4 id=2-face-recognition-algorithm>2. Face Recognition Algorithm</h4><h5 id=face-detection>Face Detection</h5><p>Face Detection is not the main subject of this project but to create database
and to increase the face recognition performance. Opencv’s Haar Cascade
Classifier function is used. In this function a haar cascade file ,which is pre
learned for face detection, is used.</p><h5 id=morphologic-operations>Morphologic Operations</h5><p>Ambient light and the movement at faces are the challenging problems in face
recognition. Therefore some morphologic operators is applied to the faces to
decrease the effect of these problems. In this project equalize histogram
function of opencv is used to decrease the effect of the ambient
light.<img src=https://lh6.googleusercontent.com/3PMQmXghZyoi4dGekFhBS-QWqZDYEJpQ2o_yLXJgMEo3goTr6OqtrOSPYjtwgApKjKoAzXhFLE57R3TRDw8SWrXsod9PUCiHJXNndjoZ-Ui3P1xb0atKy0EvobLyy9cfVifzA0yT alt></p><h5 id=surf-feature-extractor>SURF Feature Extractor</h5><p><img src=https://lh5.googleusercontent.com/eRt6xx3RU22fZ22_-TGdan22lp2x7JiNA9De7PuYa2xLVcZIcg4hVJzvrXyzdNbocv4NuBW8QOHYYTr0NNowPys7QOScefuBrgEeoiILasaQm2v0S0P8NPxVYSiPBRoPotTP3h0p alt></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=n>comboBoxAlgorithm</span><span class=p>.</span><span class=n>Text</span> <span class=p>==</span> <span class=err>“</span><span class=n>SURF</span> <span class=n>Feature</span> <span class=n>Extractor</span><span class=err>”</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=kt>string</span> <span class=n>dataDirectory</span><span class=p>=</span><span class=n>Directory</span><span class=p>.</span><span class=n>GetCurrentDirectory</span><span class=p>()+</span><span class=err>”\</span><span class=n>TrainedFaces</span><span class=err>”</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>string</span><span class=p>[]</span> <span class=n>files</span> <span class=p>=</span> <span class=n>Directory</span><span class=p>.</span><span class=n>GetFiles</span><span class=p>(</span><span class=n>dataDirectory</span><span class=p>,</span> <span class=err>“</span><span class=p>*.</span><span class=n>jpeg</span><span class=err>”</span><span class=p>,</span> <span class=n>SearchOption</span><span class=p>.</span><span class=n>AllDirectories</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>foreach</span> <span class=p>(</span><span class=kt>var</span> <span class=n>file</span> <span class=k>in</span> <span class=n>files</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=n>richTextBox1</span><span class=p>.</span><span class=n>Text</span> <span class=p>+=</span> <span class=n>file</span><span class=p>.</span><span class=n>ToString</span><span class=p>();</span>
</span></span><span class=line><span class=cl>   <span class=kt>long</span> <span class=n>recpoints</span><span class=p>;</span>
</span></span><span class=line><span class=cl>   <span class=n>ImagesampleImage</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Image</span><span class=p>(</span><span class=n>file</span><span class=p>);</span>
</span></span><span class=line><span class=cl>   <span class=n>secondImageBox</span><span class=p>.</span><span class=n>Image</span> <span class=p>=</span> <span class=n>sampleImage</span><span class=p>;</span>
</span></span><span class=line><span class=cl>   <span class=k>using</span> <span class=p>(</span><span class=n>Image</span> <span class=n>modelImage</span> <span class=p>=</span> <span class=n>sampleImage</span><span class=p>.</span><span class=n>Convert</span><span class=p>())</span>
</span></span><span class=line><span class=cl>   <span class=k>using</span> <span class=p>(</span><span class=n>Image</span> <span class=n>observedImage</span> <span class=p>=</span> <span class=n>image</span><span class=p>.</span><span class=n>Convert</span><span class=p>())</span>
</span></span><span class=line><span class=cl>   <span class=p>{</span>
</span></span><span class=line><span class=cl>       <span class=n>Image</span> <span class=n>result</span> <span class=p>=</span> <span class=n>SurfRecognizer</span><span class=p>.</span><span class=n>Draw</span><span class=p>(</span><span class=n>modelImage</span><span class=p>,</span> <span class=n>observedImage</span><span class=p>,</span> <span class=k>out</span> <span class=n>recpoints</span><span class=p>);</span>
</span></span><span class=line><span class=cl>       <span class=c1>//captureImageBox.Image = observedImage;</span>
</span></span><span class=line><span class=cl>       <span class=k>if</span> <span class=p>(</span><span class=n>recpoints</span> <span class=p>&gt;</span> <span class=m>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl>       <span class=p>{</span>
</span></span><span class=line><span class=cl>           <span class=n>MCvFont</span> <span class=n>f</span> <span class=p>=</span> <span class=k>new</span> <span class=n>MCvFont</span><span class=p>(</span><span class=n>Emgu</span><span class=p>.</span><span class=n>CV</span><span class=p>.</span><span class=n>CvEnum</span><span class=p>.</span><span class=n>FONT</span><span class=p>.</span><span class=n>CV_FONT_HERSHEY_COMPLEX</span><span class=p>,</span> <span class=m>1.0</span><span class=p>,</span> <span class=m>1.0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>           <span class=n>result</span><span class=p>.</span><span class=n>Draw</span><span class=p>(</span><span class=err>“</span><span class=n>Person</span> <span class=n>Recognited</span><span class=p>,</span> <span class=n>Welcome</span><span class=err>”</span><span class=p>,</span> <span class=k>ref</span> <span class=n>f</span><span class=p>,</span> <span class=k>new</span> <span class=n>Point</span><span class=p>(</span><span class=m>40</span><span class=p>,</span> <span class=m>40</span><span class=p>),</span> <span class=k>new</span> <span class=n>Bgr</span><span class=p>(</span><span class=m>0</span><span class=p>,</span> <span class=m>255</span><span class=p>,</span> <span class=m>0</span><span class=p>));</span>
</span></span><span class=line><span class=cl>           <span class=n>ImageViewer</span><span class=p>.</span><span class=n>Show</span><span class=p>(</span><span class=n>result</span><span class=p>,</span> <span class=n>String</span><span class=p>.</span><span class=n>Format</span><span class=p>(</span><span class=err>“</span> <span class=p>{</span><span class=m>0</span><span class=p>}</span> <span class=n>Points</span> <span class=n>Recognited</span><span class=err>”</span><span class=p>,</span> <span class=n>recpoints</span><span class=p>));</span>
</span></span><span class=line><span class=cl>       <span class=p>}</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h5 id=eigenfaces>Eigenfaces</h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=n>comboBoxAlgorithm</span><span class=p>.</span><span class=n>Text</span> <span class=p>==</span> <span class=s>&#34;EigenFaces&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=c1>//image._EqualizeHist();</span>
</span></span><span class=line><span class=cl>   <span class=k>if</span> <span class=p>(</span><span class=n>eqHisChecked</span><span class=p>.</span><span class=n>Checked</span> <span class=p>==</span> <span class=kc>true</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>{</span>
</span></span><span class=line><span class=cl>       <span class=n>image</span><span class=p>.</span><span class=n>_EqualizeHist</span><span class=p>();</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl>   <span class=kt>var</span> <span class=n>result</span> <span class=p>=</span> <span class=n>eigenFaceRecognizer</span><span class=p>.</span><span class=n>Predict</span><span class=p>(</span><span class=n>image</span><span class=p>.</span><span class=n>Convert</span><span class=p>().</span><span class=n>Resize</span><span class=p>(</span><span class=m>100</span><span class=p>,</span> <span class=m>100</span><span class=p>,</span> <span class=n>Emgu</span><span class=p>.</span><span class=n>CV</span><span class=p>.</span><span class=n>CvEnum</span><span class=p>.</span><span class=n>INTER</span><span class=p>.</span><span class=n>CV_INTER_CUBIC</span><span class=p>));</span>
</span></span><span class=line><span class=cl>   <span class=k>if</span> <span class=p>(</span><span class=n>result</span><span class=p>.</span><span class=n>Label</span> <span class=p>!=</span> <span class=p>-</span><span class=m>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>{</span>
</span></span><span class=line><span class=cl>       <span class=n>image</span><span class=p>.</span><span class=n>Draw</span><span class=p>(</span><span class=n>eigenlabels</span><span class=p>[</span><span class=n>result</span><span class=p>.</span><span class=n>Label</span><span class=p>].</span><span class=n>ToString</span><span class=p>(),</span> <span class=k>ref</span> <span class=n>font</span><span class=p>,</span> <span class=k>new</span> <span class=n>Point</span><span class=p>(</span><span class=n>face</span><span class=p>.</span><span class=n>X</span> <span class=p>-</span> <span class=m>2</span><span class=p>,</span> <span class=n>face</span><span class=p>.</span><span class=n>Y</span> <span class=p>-</span> <span class=m>2</span><span class=p>),</span> <span class=k>new</span> <span class=n>Bgr</span><span class=p>(</span><span class=n>Color</span><span class=p>.</span><span class=n>LightGreen</span><span class=p>));</span>
</span></span><span class=line><span class=cl>       <span class=n>label6</span><span class=p>.</span><span class=n>Text</span> <span class=p>=</span> <span class=n>result</span><span class=p>.</span><span class=n>Distance</span><span class=p>.</span><span class=n>ToString</span><span class=p>();</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h5 id=fisherfaces>Fisherfaces</h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=n>comboBoxAlgorithm</span><span class=p>.</span><span class=n>Text</span> <span class=p>==</span> <span class=s>&#34;FisherFaces&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=k>if</span> <span class=p>(</span><span class=n>eqHisChecked</span><span class=p>.</span><span class=n>Checked</span> <span class=p>==</span> <span class=kc>true</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>{</span>
</span></span><span class=line><span class=cl>       <span class=n>image</span><span class=p>.</span><span class=n>_EqualizeHist</span><span class=p>();</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl>   <span class=kt>var</span> <span class=n>result</span> <span class=p>=</span> <span class=n>fisherFaceRecognizer</span><span class=p>.</span><span class=n>Predict</span><span class=p>(</span><span class=n>image</span><span class=p>.</span><span class=n>Convert</span><span class=p>().</span><span class=n>Resize</span><span class=p>(</span><span class=m>100</span><span class=p>,</span> <span class=m>100</span><span class=p>,</span> <span class=n>Emgu</span><span class=p>.</span><span class=n>CV</span><span class=p>.</span><span class=n>CvEnum</span><span class=p>.</span><span class=n>INTER</span><span class=p>.</span><span class=n>CV_INTER_CUBIC</span><span class=p>));</span>
</span></span><span class=line><span class=cl>   <span class=k>if</span> <span class=p>(</span><span class=n>result</span><span class=p>.</span><span class=n>Label</span> <span class=p>!=</span> <span class=p>-</span><span class=m>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>{</span>
</span></span><span class=line><span class=cl>       <span class=n>image</span><span class=p>.</span><span class=n>Draw</span><span class=p>(</span><span class=n>fisherlabels</span><span class=p>[</span><span class=n>result</span><span class=p>.</span><span class=n>Label</span><span class=p>].</span><span class=n>ToString</span><span class=p>(),</span> <span class=k>ref</span> <span class=n>font</span><span class=p>,</span> <span class=k>new</span> <span class=n>Point</span><span class=p>(</span><span class=n>face</span><span class=p>.</span><span class=n>X</span> <span class=p>-</span> <span class=m>2</span><span class=p>,</span> <span class=n>face</span><span class=p>.</span><span class=n>Y</span> <span class=p>-</span> <span class=m>2</span><span class=p>),</span> <span class=k>new</span> <span class=n>Bgr</span><span class=p>(</span><span class=n>Color</span><span class=p>.</span><span class=n>LightGreen</span><span class=p>));</span>
</span></span><span class=line><span class=cl>       <span class=n>label6</span><span class=p>.</span><span class=n>Text</span> <span class=p>=</span> <span class=n>result</span><span class=p>.</span><span class=n>Distance</span><span class=p>.</span><span class=n>ToString</span><span class=p>();</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h5 id=local-binary-patterns-histograms>Local Binary Patterns Histograms</h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=n>comboBoxAlgorithm</span><span class=p>.</span><span class=n>Text</span> <span class=p>==</span> <span class=s>&#34;LBPHFaces&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=k>if</span> <span class=p>(</span><span class=n>eqHisChecked</span><span class=p>.</span><span class=n>Checked</span> <span class=p>==</span> <span class=kc>true</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>{</span>
</span></span><span class=line><span class=cl>       <span class=n>image</span><span class=p>.</span><span class=n>_EqualizeHist</span><span class=p>();</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl>   <span class=kt>var</span> <span class=n>result</span> <span class=p>=</span> <span class=n>lbphFaceRecognizer</span><span class=p>.</span><span class=n>Predict</span><span class=p>(</span><span class=n>image</span><span class=p>.</span><span class=n>Convert</span><span class=p>().</span><span class=n>Resize</span><span class=p>(</span><span class=m>100</span><span class=p>,</span> <span class=m>100</span><span class=p>,</span> <span class=n>Emgu</span><span class=p>.</span><span class=n>CV</span><span class=p>.</span><span class=n>CvEnum</span><span class=p>.</span><span class=n>INTER</span><span class=p>.</span><span class=n>CV_INTER_CUBIC</span><span class=p>));</span>
</span></span><span class=line><span class=cl>   <span class=k>if</span> <span class=p>(</span><span class=n>result</span><span class=p>.</span><span class=n>Label</span> <span class=p>!=</span> <span class=p>-</span><span class=m>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>{</span>
</span></span><span class=line><span class=cl>       <span class=n>image</span><span class=p>.</span><span class=n>Draw</span><span class=p>(</span><span class=n>lbphlabels</span><span class=p>[</span><span class=n>result</span><span class=p>.</span><span class=n>Label</span><span class=p>].</span><span class=n>ToString</span><span class=p>(),</span> <span class=k>ref</span> <span class=n>font</span><span class=p>,</span> <span class=k>new</span> <span class=n>Point</span><span class=p>(</span><span class=n>face</span><span class=p>.</span><span class=n>X</span> <span class=p>-</span> <span class=m>2</span><span class=p>,</span> <span class=n>face</span><span class=p>.</span><span class=n>Y</span> <span class=p>-</span> <span class=m>2</span><span class=p>),</span> <span class=k>new</span> <span class=n>Bgr</span><span class=p>(</span><span class=n>Color</span><span class=p>.</span><span class=n>LightGreen</span><span class=p>));</span>
</span></span><span class=line><span class=cl>       <span class=n>label6</span><span class=p>.</span><span class=n>Text</span> <span class=p>=</span> <span class=n>result</span><span class=p>.</span><span class=n>Distance</span><span class=p>.</span><span class=n>ToString</span><span class=p>();</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h4 id=3-passface-interface>3. PassFace Interface</h4><h5 id=database-creator>Database Creator</h5><p>A database creator is developed to make easier to implement and try different
algorithm.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>Add</span> <span class=n>DataBase</span> <span class=n>Function</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>private</span> <span class=k>void</span> <span class=n>addDatabaseButton_Click</span><span class=p>(</span><span class=kt>object</span> <span class=n>sender</span><span class=p>,</span> <span class=n>EventArgs</span> <span class=n>e</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=c1>//Take time for save filename</span>
</span></span><span class=line><span class=cl>   <span class=kt>string</span> <span class=n>fileName</span> <span class=p>=</span> <span class=n>textBox1</span><span class=p>.</span><span class=n>Text</span><span class=p>+</span><span class=s>&#34;_&#34;</span><span class=p>+</span><span class=n>DateTime</span><span class=p>.</span><span class=n>Now</span><span class=p>.</span><span class=n>Day</span><span class=p>.</span><span class=n>ToString</span><span class=p>()</span> <span class=p>+</span> <span class=s>&#34;-&#34;</span> <span class=p>+</span> <span class=n>DateTime</span><span class=p>.</span><span class=n>Now</span><span class=p>.</span><span class=n>Month</span><span class=p>.</span><span class=n>ToString</span><span class=p>()</span> <span class=p>+</span> <span class=s>&#34;-&#34;</span> <span class=p>+</span> <span class=n>DateTime</span><span class=p>.</span><span class=n>Now</span><span class=p>.</span><span class=n>Year</span><span class=p>.</span><span class=n>ToString</span><span class=p>()</span>
</span></span><span class=line><span class=cl>   <span class=p>+</span> <span class=s>&#34;-&#34;</span> <span class=p>+</span> <span class=n>DateTime</span><span class=p>.</span><span class=n>Now</span><span class=p>.</span><span class=n>Hour</span><span class=p>.</span><span class=n>ToString</span><span class=p>()</span> <span class=p>+</span> <span class=s>&#34;-&#34;</span> <span class=p>+</span> <span class=n>DateTime</span><span class=p>.</span><span class=n>Now</span><span class=p>.</span><span class=n>Minute</span><span class=p>.</span><span class=n>ToString</span><span class=p>()+</span><span class=s>&#34;-&#34;</span> <span class=p>+</span> <span class=n>DateTime</span><span class=p>.</span><span class=n>Now</span><span class=p>.</span><span class=n>Second</span><span class=p>.</span><span class=n>ToString</span><span class=p>()+</span><span class=s>&#34;.jpeg&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   <span class=c1>//First The faces in the Image is detected</span>
</span></span><span class=line><span class=cl>   <span class=n>Image</span> <span class=n>image</span> <span class=p>=</span> <span class=n>_capture</span><span class=p>.</span><span class=n>RetrieveBgrFrame</span><span class=p>().</span><span class=n>Resize</span><span class=p>(</span><span class=m>400</span><span class=p>,</span> <span class=m>300</span><span class=p>,</span> <span class=n>Emgu</span><span class=p>.</span><span class=n>CV</span><span class=p>.</span><span class=n>CvEnum</span><span class=p>.</span><span class=n>INTER</span><span class=p>.</span><span class=n>CV_INTER_CUBIC</span><span class=p>);</span>
</span></span><span class=line><span class=cl>   <span class=n>List</span> <span class=n>faces</span> <span class=p>=</span> <span class=k>new</span> <span class=n>List</span><span class=p>();</span>
</span></span><span class=line><span class=cl>   <span class=n>List</span> <span class=n>eyes</span> <span class=p>=</span> <span class=k>new</span> <span class=n>List</span><span class=p>();</span>
</span></span><span class=line><span class=cl>   <span class=kt>long</span> <span class=n>detectionTime</span><span class=p>;</span>
</span></span><span class=line><span class=cl>   <span class=n>DetectFace</span><span class=p>.</span><span class=n>Detect</span><span class=p>(</span><span class=n>image</span><span class=p>,</span> <span class=s>&#34;haarcascade_frontalface_default.xml&#34;</span><span class=p>,</span> <span class=s>&#34;haarcascade_eye.xml&#34;</span><span class=p>,</span> <span class=n>faces</span><span class=p>,</span> <span class=n>eyes</span><span class=p>,</span> <span class=k>out</span> <span class=n>detectionTime</span><span class=p>);</span>
</span></span><span class=line><span class=cl>   <span class=k>foreach</span> <span class=p>(</span><span class=n>Rectangle</span> <span class=n>face</span> <span class=k>in</span> <span class=n>faces</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>{</span>
</span></span><span class=line><span class=cl>       <span class=n>image</span><span class=p>.</span><span class=n>ROI</span> <span class=p>=</span> <span class=n>face</span><span class=p>;</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl>   <span class=n>Directory</span><span class=p>.</span><span class=n>CreateDirectory</span><span class=p>(</span><span class=s>&#34;TrainedFaces&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>   <span class=n>image</span><span class=p>.</span><span class=n>Resize</span><span class=p>(</span><span class=m>100</span><span class=p>,</span> <span class=m>100</span><span class=p>,</span> <span class=n>Emgu</span><span class=p>.</span><span class=n>CV</span><span class=p>.</span><span class=n>CvEnum</span><span class=p>.</span><span class=n>INTER</span><span class=p>.</span><span class=n>CV_INTER_CUBIC</span><span class=p>).</span><span class=n>ToBitmap</span><span class=p>().</span><span class=n>Save</span><span class=p>(</span><span class=s>&#34;TrainedFaces\\&#34;</span> <span class=p>+</span> <span class=n>fileName</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>private</span> <span class=k>void</span> <span class=n>comboBoxAlgorithm_SelectedIndexChanged</span><span class=p>(</span><span class=kt>object</span> <span class=n>sender</span><span class=p>,</span> <span class=n>EventArgs</span> <span class=n>e</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=k>if</span> <span class=p>(</span><span class=n>comboBoxAlgorithm</span><span class=p>.</span><span class=n>Text</span> <span class=p>==</span> <span class=s>&#34;EigenFaces&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>{</span>
</span></span><span class=line><span class=cl>       <span class=k>try</span>
</span></span><span class=line><span class=cl>       <span class=p>{</span>
</span></span><span class=line><span class=cl>         <span class=kt>string</span> <span class=n>dataDirectory</span> <span class=p>=</span> <span class=n>Directory</span><span class=p>.</span><span class=n>GetCurrentDirectory</span><span class=p>()</span> <span class=p>+</span> <span class=s>&#34;\\TrainedFaces&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>         <span class=kt>string</span><span class=p>[]</span> <span class=n>files</span> <span class=p>=</span> <span class=n>Directory</span><span class=p>.</span><span class=n>GetFiles</span><span class=p>(</span><span class=n>dataDirectory</span><span class=p>,</span> <span class=s>&#34;*.jpeg&#34;</span><span class=p>,</span> <span class=n>SearchOption</span><span class=p>.</span><span class=n>AllDirectories</span><span class=p>);</span>
</span></span><span class=line><span class=cl>         <span class=n>eigenTrainedImageCounter</span> <span class=p>=</span> <span class=m>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>         <span class=k>foreach</span> <span class=p>(</span><span class=kt>var</span> <span class=n>file</span> <span class=k>in</span> <span class=n>files</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>{</span>
</span></span><span class=line><span class=cl>               <span class=n>Image</span> <span class=n>TrainedImage</span><span class=p>=</span><span class=k>new</span> <span class=n>Image</span><span class=p>(</span><span class=n>file</span><span class=p>);</span>
</span></span><span class=line><span class=cl>               <span class=k>if</span> <span class=p>(</span><span class=n>eqHisChecked</span><span class=p>.</span><span class=n>Checked</span> <span class=p>==</span> <span class=kc>true</span><span class=p>)</span>
</span></span><span class=line><span class=cl>               <span class=p>{</span>
</span></span><span class=line><span class=cl>                   <span class=n>TrainedImage</span><span class=p>.</span><span class=n>_EqualizeHist</span><span class=p>();</span>
</span></span><span class=line><span class=cl>               <span class=p>}</span>
</span></span><span class=line><span class=cl>               <span class=n>eigenTrainingImages</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=n>TrainedImage</span><span class=p>.</span><span class=n>Convert</span><span class=p>());</span>
</span></span><span class=line><span class=cl>               <span class=n>eigenlabels</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=n>fileName</span><span class=p>(</span><span class=n>file</span><span class=p>));</span>
</span></span><span class=line><span class=cl>               <span class=n>eigenIntlabels</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=n>eigenTrainedImageCounter</span><span class=p>);</span>
</span></span><span class=line><span class=cl>               <span class=n>eigenTrainedImageCounter</span><span class=p>++;</span>
</span></span><span class=line><span class=cl>               <span class=n>richTextBox1</span><span class=p>.</span><span class=n>Text</span> <span class=p>+=</span> <span class=n>fileName</span><span class=p>(</span><span class=n>file</span><span class=p>)+</span><span class=s>&#34;\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>         <span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=n>eigenFaceRecognizer</span><span class=p>=</span> <span class=k>new</span> <span class=n>EigenFaceRecognizer</span><span class=p>(</span><span class=n>eigenTrainedImageCounter</span><span class=p>,</span> <span class=m>3000</span><span class=p>);</span>
</span></span><span class=line><span class=cl>          <span class=n>eigenFaceRecognizer</span><span class=p>.</span><span class=n>Train</span><span class=p>(</span><span class=n>eigenTrainingImages</span><span class=p>.</span><span class=n>ToArray</span><span class=p>(),</span> <span class=n>eigenIntlabels</span><span class=p>.</span><span class=n>ToArray</span><span class=p>());</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>       <span class=p>}</span>
</span></span><span class=line><span class=cl>       <span class=k>catch</span> <span class=p>(</span><span class=n>Exception</span> <span class=n>ex</span><span class=p>)</span>
</span></span><span class=line><span class=cl>       <span class=p>{</span>
</span></span><span class=line><span class=cl>           <span class=n>MessageBox</span><span class=p>.</span><span class=n>Show</span><span class=p>(</span><span class=n>ex</span><span class=p>.</span><span class=n>ToString</span><span class=p>());</span>
</span></span><span class=line><span class=cl>           <span class=n>MessageBox</span><span class=p>.</span><span class=n>Show</span><span class=p>(</span><span class=s>&#34;Nothing in binary database, please add at least a face(Simply train the prototype with the Add Face Button).&#34;</span><span class=p>,</span> <span class=s>&#34;Triained faces load&#34;</span><span class=p>,</span> <span class=n>MessageBoxButtons</span><span class=p>.</span><span class=n>OK</span><span class=p>,</span> <span class=n>MessageBoxIcon</span><span class=p>.</span><span class=n>Exclamation</span><span class=p>);</span>
</span></span><span class=line><span class=cl>       <span class=p>}</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl>   <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=n>comboBoxAlgorithm</span><span class=p>.</span><span class=n>Text</span> <span class=p>==</span> <span class=s>&#34;FisherFaces&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>{</span>
</span></span><span class=line><span class=cl>       <span class=k>try</span>
</span></span><span class=line><span class=cl>       <span class=p>{</span>
</span></span><span class=line><span class=cl>           <span class=kt>string</span> <span class=n>dataDirectory</span> <span class=p>=</span> <span class=n>Directory</span><span class=p>.</span><span class=n>GetCurrentDirectory</span><span class=p>()</span> <span class=p>+</span> <span class=s>&#34;\\TrainedFaces&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>           <span class=kt>string</span><span class=p>[]</span> <span class=n>files</span> <span class=p>=</span> <span class=n>Directory</span><span class=p>.</span><span class=n>GetFiles</span><span class=p>(</span><span class=n>dataDirectory</span><span class=p>,</span> <span class=s>&#34;*.jpeg&#34;</span><span class=p>,</span> <span class=n>SearchOption</span><span class=p>.</span><span class=n>AllDirectories</span><span class=p>);</span>
</span></span><span class=line><span class=cl>           <span class=n>fisherTrainedImageCounter</span> <span class=p>=</span> <span class=m>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>           <span class=k>foreach</span> <span class=p>(</span><span class=kt>var</span> <span class=n>file</span> <span class=k>in</span> <span class=n>files</span><span class=p>)</span>
</span></span><span class=line><span class=cl>           <span class=p>{</span>
</span></span><span class=line><span class=cl>               <span class=n>Image</span> <span class=n>TrainedImage</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Image</span><span class=p>(</span><span class=n>file</span><span class=p>);</span>
</span></span><span class=line><span class=cl>               <span class=n>fisherTrainingImages</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=n>TrainedImage</span><span class=p>.</span><span class=n>Convert</span><span class=p>());</span>
</span></span><span class=line><span class=cl>               <span class=k>if</span> <span class=p>(</span><span class=n>eqHisChecked</span><span class=p>.</span><span class=n>Checked</span> <span class=p>==</span> <span class=kc>true</span><span class=p>)</span>
</span></span><span class=line><span class=cl>               <span class=p>{</span>
</span></span><span class=line><span class=cl>                   <span class=n>TrainedImage</span><span class=p>.</span><span class=n>_EqualizeHist</span><span class=p>();</span>
</span></span><span class=line><span class=cl>               <span class=p>}</span>
</span></span><span class=line><span class=cl>               <span class=n>fisherlabels</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=n>fileName</span><span class=p>(</span><span class=n>file</span><span class=p>));</span>
</span></span><span class=line><span class=cl>               <span class=n>fisherIntlabels</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=n>fisherTrainedImageCounter</span><span class=p>);</span>
</span></span><span class=line><span class=cl>               <span class=n>fisherTrainedImageCounter</span><span class=p>++;</span>
</span></span><span class=line><span class=cl>               <span class=n>richTextBox1</span><span class=p>.</span><span class=n>Text</span> <span class=p>+=</span> <span class=n>fileName</span><span class=p>(</span><span class=n>file</span><span class=p>)</span> <span class=p>+</span> <span class=s>&#34;\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>           <span class=p>}</span>
</span></span><span class=line><span class=cl>           <span class=n>fisherFaceRecognizer</span> <span class=p>=</span> <span class=k>new</span> <span class=n>FisherFaceRecognizer</span><span class=p>(</span><span class=n>fisherTrainedImageCounter</span><span class=p>,</span> <span class=m>3000</span><span class=p>);</span>
</span></span><span class=line><span class=cl>           <span class=n>fisherFaceRecognizer</span><span class=p>.</span><span class=n>Train</span><span class=p>(</span><span class=n>fisherTrainingImages</span><span class=p>.</span><span class=n>ToArray</span><span class=p>(),</span> <span class=n>fisherIntlabels</span><span class=p>.</span><span class=n>ToArray</span><span class=p>());</span>
</span></span><span class=line><span class=cl>       <span class=p>}</span>
</span></span><span class=line><span class=cl>       <span class=k>catch</span> <span class=p>(</span><span class=n>Exception</span> <span class=n>ex</span><span class=p>)</span>
</span></span><span class=line><span class=cl>       <span class=p>{</span>
</span></span><span class=line><span class=cl>           <span class=n>MessageBox</span><span class=p>.</span><span class=n>Show</span><span class=p>(</span><span class=n>ex</span><span class=p>.</span><span class=n>ToString</span><span class=p>());</span>
</span></span><span class=line><span class=cl>           <span class=n>MessageBox</span><span class=p>.</span><span class=n>Show</span><span class=p>(</span><span class=s>&#34;Nothing in binary database, please add at least a face(Simply train the prototype with the Add Face Button).&#34;</span><span class=p>,</span> <span class=s>&#34;Triained faces load&#34;</span><span class=p>,</span> <span class=n>MessageBoxButtons</span><span class=p>.</span><span class=n>OK</span><span class=p>,</span> <span class=n>MessageBoxIcon</span><span class=p>.</span><span class=n>Exclamation</span><span class=p>);</span>
</span></span><span class=line><span class=cl>       <span class=p>}</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl>   <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=n>comboBoxAlgorithm</span><span class=p>.</span><span class=n>Text</span> <span class=p>==</span> <span class=s>&#34;LBPHFaces&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>{</span>
</span></span><span class=line><span class=cl>       <span class=k>try</span>
</span></span><span class=line><span class=cl>       <span class=p>{</span>
</span></span><span class=line><span class=cl>           <span class=kt>string</span> <span class=n>dataDirectory</span> <span class=p>=</span> <span class=n>Directory</span><span class=p>.</span><span class=n>GetCurrentDirectory</span><span class=p>()</span> <span class=p>+</span> <span class=s>&#34;\\TrainedFaces&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>           <span class=kt>string</span><span class=p>[]</span> <span class=n>files</span> <span class=p>=</span> <span class=n>Directory</span><span class=p>.</span><span class=n>GetFiles</span><span class=p>(</span><span class=n>dataDirectory</span><span class=p>,</span> <span class=s>&#34;*.jpeg&#34;</span><span class=p>,</span> <span class=n>SearchOption</span><span class=p>.</span><span class=n>AllDirectories</span><span class=p>);</span>
</span></span><span class=line><span class=cl>           <span class=n>lbphTrainedImageCounter</span> <span class=p>=</span> <span class=m>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>           <span class=k>foreach</span> <span class=p>(</span><span class=kt>var</span> <span class=n>file</span> <span class=k>in</span> <span class=n>files</span><span class=p>)</span>
</span></span><span class=line><span class=cl>           <span class=p>{</span>
</span></span><span class=line><span class=cl>               <span class=n>Image</span> <span class=n>TrainedImage</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Image</span><span class=p>(</span><span class=n>file</span><span class=p>);</span>
</span></span><span class=line><span class=cl>               <span class=k>if</span> <span class=p>(</span><span class=n>eqHisChecked</span><span class=p>.</span><span class=n>Checked</span> <span class=p>==</span> <span class=kc>true</span><span class=p>)</span>
</span></span><span class=line><span class=cl>               <span class=p>{</span>
</span></span><span class=line><span class=cl>                   <span class=n>TrainedImage</span><span class=p>.</span><span class=n>_EqualizeHist</span><span class=p>();</span>
</span></span><span class=line><span class=cl>               <span class=p>}</span>
</span></span><span class=line><span class=cl>               <span class=n>lbphTrainingImages</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=n>TrainedImage</span><span class=p>.</span><span class=n>Convert</span><span class=p>());</span>
</span></span><span class=line><span class=cl>               <span class=n>lbphlabels</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=n>fileName</span><span class=p>(</span><span class=n>file</span><span class=p>));</span>
</span></span><span class=line><span class=cl>               <span class=n>lbphIntlabels</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=n>lbphTrainedImageCounter</span><span class=p>);</span>
</span></span><span class=line><span class=cl>               <span class=n>lbphTrainedImageCounter</span><span class=p>++;</span>
</span></span><span class=line><span class=cl>               <span class=n>richTextBox1</span><span class=p>.</span><span class=n>Text</span> <span class=p>+=</span> <span class=n>fileName</span><span class=p>(</span><span class=n>file</span><span class=p>)</span> <span class=p>+</span> <span class=s>&#34;\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>           <span class=p>}</span>
</span></span><span class=line><span class=cl>           <span class=n>lbphFaceRecognizer</span> <span class=p>=</span> <span class=k>new</span> <span class=n>LBPHFaceRecognizer</span><span class=p>(</span><span class=m>1</span><span class=p>,</span> <span class=m>8</span><span class=p>,</span> <span class=m>8</span><span class=p>,</span> <span class=m>8</span><span class=p>,</span> <span class=m>123.0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>           <span class=n>lbphFaceRecognizer</span><span class=p>.</span><span class=n>Train</span><span class=p>(</span><span class=n>lbphTrainingImages</span><span class=p>.</span><span class=n>ToArray</span><span class=p>(),</span> <span class=n>lbphIntlabels</span><span class=p>.</span><span class=n>ToArray</span><span class=p>());</span>
</span></span><span class=line><span class=cl>       <span class=p>}</span>
</span></span><span class=line><span class=cl>       <span class=k>catch</span> <span class=p>(</span><span class=n>Exception</span> <span class=n>ex</span><span class=p>)</span>
</span></span><span class=line><span class=cl>       <span class=p>{</span>
</span></span><span class=line><span class=cl>           <span class=n>MessageBox</span><span class=p>.</span><span class=n>Show</span><span class=p>(</span><span class=n>ex</span><span class=p>.</span><span class=n>ToString</span><span class=p>());</span>
</span></span><span class=line><span class=cl>           <span class=n>MessageBox</span><span class=p>.</span><span class=n>Show</span><span class=p>(</span><span class=s>&#34;Nothing in binary database, please add at least a face(Simply train the prototype with the Add Face Button).&#34;</span><span class=p>,</span> <span class=s>&#34;Triained faces load&#34;</span><span class=p>,</span> <span class=n>MessageBoxButtons</span><span class=p>.</span><span class=n>OK</span><span class=p>,</span> <span class=n>MessageBoxIcon</span><span class=p>.</span><span class=n>Exclamation</span><span class=p>);</span>
</span></span><span class=line><span class=cl>       <span class=p>}</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><img src=https://lh4.googleusercontent.com/560MflmHrYy5nUi4gIAQexc-Cdqfyr3GUej_g1wwa0HawxO4A7OFmOkgd0g4oBvy9An1PjiYxSM_8G0G2FS_zC2y3gWisgkr0NTikxv4oyDFL9qM6IpkupdhA7OjnUAb4cuy51Pa alt></p><h5 id=user-interface>User Interface</h5><p>As a source camera, video, single image and multi image can be selected.
Different source selection is developed using opencv and .net libraries.</p><p><img src=https://lh5.googleusercontent.com/6y8Sx-7a4PDYcZWv9W_COKJf9EaGKQl-_3vc6q9oo-HzQeC4CJMJoGTceeaUAC4F31mjpGs84Zrkse1viHgwCCKnRvhciz7aEjmmySR16PAD2aOGmOrLWHr6R3hO7GvV0TamI9nS alt></p><h4 id=4-future-of-passface-project>4. Future of PassFace Project</h4><h5 id=algorithm-accuracy-analysis>Algorithm Accuracy Analysis</h5><p>Program designed for using different algorithms. But the comparison of these
algorithms is not finished. The next step is implementing this algorithm the
compare the algorithms accuracy and performance truly.</p><h5 id=performance-optimizations>Performance Optimizations</h5><p>For fix the performance problems, develop the program for multiple core CPUs.
For better performance, develop the program to run over GPU using CUDA
libraries.</p><h5 id=algorithm-optimizations>Algorithm Optimizations</h5><p>In these days, the most improved face recognition algorithms are using 3D face
recognition technologies. It is based on; the 3D model of the faces are created
using different 2D images. Therefore, the angle of looking and the direction of
light are no longer be problem for these algorithms. The recognize operations
are implementing using Neural Networks and Deep Learning Algorithms. It is
planning to implement latest algorithms to increase accuracy in different
conditions.</p><h4 id=5-conclusion>5. Conclusion</h4><p>In this project, the main principles of the face recognition algorithms are
learned. The performances and accuracies of the algorithms are compared. A gui
application is developed to create database and process images using selected
algorithm.</p></div><hr><p><strong>Tags:</strong><a href=https://mozanunal.com/tags/image-processing/>Image Processing</a>, <a href=https://mozanunal.com/tags/emgucv/>EmguCV</a>, <a href=https://mozanunal.com/tags/opencv/>Opencv</a>, <a href=https://mozanunal.com/tags/eigenfaces/>Eigenfaces</a>, <a href=https://mozanunal.com/tags/face-recognition/>Face Recognition</a>, <a href=https://mozanunal.com/tags/fisgerfaces/>Fisgerfaces</a></p><hr><h3>Related Posts</h3><ul><li><a href=https://mozanunal.com/2014/11/kamera-ile-arac-says-takibi/>[TR] Kamera ile Araç Sayısı Takibi</a></li><li><a href=https://mozanunal.com/2014/10/kamera-ile-fare-kontrolu/>[TR] Kamera ile Fare Kontrolü</a></li><li><a href=https://mozanunal.com/2014/09/gercek-zamanl-obje-takibiemgucv-ile/>[TR] Gerçek Zamanlı Obje Takibi(EmguCv ile)</a></li><li><a href=https://mozanunal.com/2015/04/processing-ile-artrlms-gerceklik/>[TR] Processing ile Artırılmış Gerçeklik</a></li><li><a href=https://mozanunal.com/2015/03/baks-acs-tabanl-3-boyutlu-gorus2/>[TR] Bakış Açısı Tabanlı 3 Boyutlu Görüş Versiyon 2.00</a></li></ul><hr><p><a href=https://mozanunal.com/2016/03/ayarlanabilir-tasnabilir-guc-kaynag-yapm/>&larr; [TR] Ayarlanabilir Taşınabilir Güç Kaynağı Yapımı</a> | <a href=https://mozanunal.com/2016/06/wpf-ile-ev-otomasyonu-arayuzu/>[TR] WPF ile Ev Otomasyonu Arayüzü &rarr;</a></p></article></main><footer><p>&copy; 2026 M.Ozan Unal.</p></footer></body><link rel=stylesheet href=/libs/katex/katex.min.v0.16.9.css><script defer src=/libs/katex/katex.min.v0.16.9.js></script><script defer src=/libs/katex/auto-render.v0.16.9.js></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"\\(",right:"\\)",display:!1},{left:"$",right:"$",display:!1}],throwOnError:!1})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-007KSW65JL"></script><script>var doNotTrack=!1,dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-007KSW65JL")}</script></html>